<!DOCTYPE html>
<!--[if lte IE 8]><html class="lt-ie9"><![endif]-->
<!--[if gt IE 8]><!--><html><!--<![endif]-->
<head>
<meta charset="utf-8">
<title>testingu</title>
<meta name="viewport" content="width=device-width, initial-scale=1">
<!--
Made in Twine 1.4.2 (running on Windows 8)
Built on 28 Mar 2015 at 19:07:35, -0600

Sugarcane is based on:

TiddlyWiki 1.2.39 by Jeremy Ruston, (jeremy [at] osmosoft [dot] com)

Published under a BSD open source license

Copyright (c) Osmosoft Limited 2005

Redistribution and use in source and binary forms, with or without modification,
are permitted provided that the following conditions are met:

Redistributions of source code must retain the above copyright notice, this
list of conditions and the following disclaimer.

Redistributions in binary form must reproduce the above copyright notice, this
list of conditions and the following disclaimer in the documentation and/or other
materials provided with the distribution.

Neither the name of the Osmosoft Limited nor the names of its contributors may be
used to endorse or promote products derived from this software without specific
prior written permission.

THIS SOFTWARE IS PROVIDED BY THE COPYRIGHT HOLDERS AND CONTRIBUTORS "AS IS" AND ANY
EXPRESS OR IMPLIED WARRANTIES, INCLUDING, BUT NOT LIMITED TO, THE IMPLIED WARRANTIES
OF MERCHANTABILITY AND FITNESS FOR A PARTICULAR PURPOSE ARE DISCLAIMED. IN NO EVENT
SHALL THE COPYRIGHT OWNER OR CONTRIBUTORS BE LIABLE FOR ANY DIRECT, INDIRECT,
INCIDENTAL, SPECIAL, EXEMPLARY, OR CONSEQUENTIAL DAMAGES (INCLUDING, BUT NOT LIMITED
TO, PROCUREMENT OF SUBSTITUTE GOODS OR SERVICES; LOSS OF USE, DATA, OR PROFITS; OR
BUSINESS INTERRUPTION) HOWEVER CAUSED AND ON ANY THEORY OF LIABILITY, WHETHER IN
CONTRACT, STRICT LIABILITY, OR TORT (INCLUDING NEGLIGENCE OR OTHERWISE) ARISING IN
ANY WAY OUT OF THE USE OF THIS SOFTWARE, EVEN IF ADVISED OF THE POSSIBILITY OF SUCH
DAMAGE.
-->
<script title="engine">
(function(){

function clone(a){var constructor,b,proto;if(!a||typeof a!="object"){return a
}constructor=a.constructor;if(constructor==Date||constructor==RegExp){b=new constructor(a)}else{if(constructor==Array){b=[]}else{if(a.nodeType&&typeof a.cloneNode=="function"){b=a.cloneNode(true)}else{proto=(typeof Object.getPrototypeOf=="function"?Object.getPrototypeOf(a):a.__proto__);b=proto?Object.create(proto):{}}}}for(var property in a){if(Object.prototype.hasOwnProperty.call(a,property)&&!isCyclic(a[property])){if(typeof a[property]=="object"){try{b[property]=clone(a[property]);continue}catch(e){}}b[property]=a[property]}}return b}function isCyclic(obj){var properties=[];return(function recurse(obj){var key,i,ownProps=[];if(obj&&typeof obj=="object"){if(properties.indexOf(obj)>-1){return true
}properties.push(obj);for(key in obj){if(Object.prototype.hasOwnProperty.call(obj,key)&&recurse(obj[key])){return true
}}}return false}(obj))}function insertElement(a,d,f,c,e){var b=document.createElement(d);if(f){b.id=f}if(c){b.className=c}if(e){insertText(b,e)}if(a){a.appendChild(b)}return b}function addClickHandler(el,fn){if(el.addEventListener){el.addEventListener("click",fn)}else{if(el.attachEvent){el.attachEvent("onclick",fn)}}}function insertText(a,b){return a.appendChild(document.createTextNode(b))}function removeChildren(a){while(a.hasChildNodes()){a.removeChild(a.firstChild)}}function findPassageParent(el){while(el&&el!=document.body&&!~el.className.indexOf("passage")){el=el.parentNode}return el==document.body?null:el}function setPageElement(c,b,a){var place;if(place=(typeof c=="string"?document.getElementById(c):c)){removeChildren(place);if(tale.has(b)){new Wikifier(place,tale.get(b).processText())}else{new Wikifier(place,a)}}}var scrollWindowInterval;function scrollWindowTo(e,margin){var d=window.scrollY?window.scrollY:document.documentElement.scrollTop,m=window.innerHeight?window.innerHeight:document.documentElement.clientHeight,g=k(e),j=(d>g)?-1:1,b=0,c=Math.abs(d-g);scrollWindowInterval&&window.clearInterval(scrollWindowInterval);if(c){scrollWindowInterval=window.setInterval(h,25)}function h(){b+=0.1;window.scrollTo(0,d+j*(c*Math.easeInOut(b)));if(b>=1){window.clearInterval(scrollWindowInterval)}}function k(o){var p=a(o),h=o.offsetHeight,n=d+m;p=Math.min(Math.max(p+(margin||0)*(p<d?-1:1),0),n);if(p<d){return p
}else{if(p+h>n){if(h<m){return(p-(m-h)+20)}else{return p
}}else{return p
}}}function a(l){var m=0;while(l.offsetParent){m+=l.offsetTop;l=l.offsetParent}return m}}function delta(old,neu){var vars,ret={};if(old&&neu){for(vars in neu){if(neu[vars]!==old[vars]){ret[vars]=neu[vars]}}}return ret}function decompile(val){var i,ret;if((typeof val!="object"&&typeof val!="function")||!val){return val
}else{if(val instanceof Passage){return{"[[Passage]]":val.id}}else{if(Array.isArray(val)){ret=[]}else{ret={}}}}for(i in val){if(Object.prototype.hasOwnProperty.call(val,i)&&!isCyclic(val[i])){ret[i]=decompile(val[i])}}if(typeof val=="function"||val instanceof RegExp){try{internalEval(val+"");ret["[[Call]]"]=val+""}catch(e){ret["[[Call]]"]="function(){}"}}return ret}function recompile(val){var i,ret=val;if(val&&typeof val=="object"){if(typeof val["[[Passage]]"]=="number"){return tale.get(val["[[Passage]]"])}if(typeof val["[[Call]]"]=="string"){try{ret=internalEval(val["[[Call]]"])}catch(e){}}for(i in val){if(Object.prototype.hasOwnProperty.call(val,i)){ret[i]=recompile(val[i])}}}return ret}function addStyle(b){if(document.createStyleSheet){document.getElementsByTagName("head")[0].insertAdjacentHTML("beforeEnd","&nbsp;<style>"+b+"</style>")}else{var a=document.createElement("style");a.appendChild(document.createTextNode(b));document.getElementsByTagName("head")[0].appendChild(a)}}function alterCSS(text){var temp="",imgPassages=tale.lookup("tags","Twine.image");text=text.replace(/\/\*(?:[^\*]|\*(?!\/))*\*\//g,"");text=text.replace(/:link/g,"[class*=Link]");text=text.replace(/:visited/g,".visitedLink");text=text.replace(/@import\s+(?:url\s*\(\s*['"]?|['"])[^"'\s]+(?:['"]?\s*\)|['"])\s*([\w\s\(\)\d\:,\-]*);/g,function(e){temp+=e;return""});text=temp+text;return text.replace(new RegExp(Wikifier.imageFormatter.lookahead,"gim"),function(m,p1,p2,p3,src){for(var i=0;i<imgPassages.length;i++){if(imgPassages[i].title==src){src=imgPassages[i].text;break}}return"url("+src+")"})}function setTransitionCSS(styleText){styleText=alterCSS(styleText);var style=document.getElementById("transitionCSS");style.styleSheet?(style.styleSheet.cssText=styleText):(style.innerHTML=styleText)}function throwError(a,b,tooltip){if(a){var elem=insertElement(a,"span",null,"marked",b);tooltip&&elem.setAttribute("title",tooltip)}else{alert("Regrettably, this "+tale.identity()+"'s code just ran into a problem:\n"+b+".\n"+softErrorMessage)}}Math.easeInOut=function(a){return(1-((Math.cos(a*Math.PI)+1)/2))};String.prototype.readMacroParams=function(keepquotes){var exec,re=/(?:\s*)(?:(?:"([^"]*)")|(?:'([^']*)')|(?:\[\[((?:[^\]]|\](?!\]))*)\]\])|([^"'\s]\S*))/mg,params=[];do{var val;exec=re.exec(this);if(exec){if(exec[1]){val=exec[1];keepquotes&&(val='"'+val+'"')}else{if(exec[2]){val=exec[2];keepquotes&&(val="'"+val+"'")}else{if(exec[3]){val=exec[3];keepquotes&&(val='"'+val.replace('"','\\"')+'"')}else{if(exec[4]){val=exec[4]}}}}val&&params.push(val)}}while(exec);return params};String.prototype.readBracketedList=function(){var c,b="\\[\\[([^\\]]+)\\]\\]",a="[^\\s$]+",e="(?:"+b+")|("+a+")",d=new RegExp(e,"mg"),f=[];do{c=d.exec(this);if(c){if(c[1]){f.push(c[1])}else{if(c[2]){f.push(c[2])}}}}while(c);return(f)};function rot13(s){return s.replace(/[a-zA-Z]/g,function(c){return String.fromCharCode((c<="Z"?90:122)>=(c=c.charCodeAt()+13)?c:c-26)})}Object.create||(function(){var F=function(){};Object.create=function(o){if(typeof o!="object"){throw TypeError()}F.prototype=o;return new F()}})();String.prototype.trim||(String.prototype.trim=function(){return this.replace(/^\s\s*/,"").replace(/\s\s*$/,"")});Array.isArray||(Array.isArray=function(arg){return Object.prototype.toString.call(arg)==="[object Array]"});Array.prototype.indexOf||(Array.prototype.indexOf=function(b,d){d=(d==null)?0:d;var a=this.length;for(var c=d;c<a;c++){if(this[c]==b){return c
}}return -1});Array.prototype.forEach||(Array.prototype.forEach=function(fun){if(this==null){throw TypeError()}var t=Object(this);var len=+t.length;if(typeof fun!="function"){throw TypeError()}var thisArg=arguments.length>=2?arguments[1]:void 0;for(var i=0;i<len;i++){if(i in t){fun.call(thisArg,t[i],i,t)}}});(function(){function t(t){this.message=t}var e=window,r="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/=";t.prototype=Error(),t.prototype.name="InvalidCharacterError",e.btoa||(e.btoa=function(e){for(var o,n,a=0,i=r,c="";e.charAt(0|a)||(i="=",a%1);c+=i.charAt(63&o>>8-8*(a%1))){if(n=e.charCodeAt(a+=0.75),n>255){throw new t()}o=o<<8|n}return c}),e.atob||(e.atob=function(e){if(e=e.replace(/=+$/,""),1==e.length%4){throw new t()}for(var o,n,a=0,i=0,c="";n=e.charAt(i++);~n&&(o=a%4?64*o+n:n,a++%4)?c+=String.fromCharCode(255&o>>(6&-2*a)):0){n=r.indexOf(n)}return c})})();var hasTransition="transition" in document.documentElement.style||"-webkit-transition" in document.documentElement.style;function fade(f,c){var h;var e=f.cloneNode(true);var g=(c.fade=="in")?1:-1;f.parentNode.replaceChild(e,f);if(c.fade=="in"){h=0;e.style.visibility="visible"}else{h=1
}b(e,h);var a=window.setInterval(d,25);function d(){h+=0.05*g;b(e,Math.easeInOut(h));if(((g==1)&&(h>=1))||((g==-1)&&(h<=0))){f.style.visibility=(c.fade=="in")?"visible":"hidden";if(e.parentNode){e.parentNode.replaceChild(f,e)}window.clearInterval(a);if(c.onComplete){c.onComplete.call(f)}}}function b(k,j){var l=Math.floor(j*100);k.style.zoom=1;k.style.filter="alpha(opacity="+l+")";k.style.opacity=j}}function History(){this.history=[{passage:null,variables:{}}];this.id=new Date().getTime()+"";this.hash=""}History.prototype.encodeHistory=function(b,noVars){var ret=".",vars,type,hist=this.history[b],d=this.history[b+1]?delta(this.history[b+1].variables,hist.variables):hist.variables;function vtob(val){try{return window.btoa(unescape(encodeURIComponent(JSON.stringify(decompile(val)))))}catch(e){return"0"
}}if(!hist.passage||hist.passage.id==null){return""
}ret+=hist.passage.id.toString(36);if(noVars){return ret
}for(vars in d){type=typeof d[vars];if(type!="undefined"){ret+="$"+vtob(vars)+","+vtob(d[vars])}}for(vars in hist.linkVars){type=typeof hist.linkVars[vars];if(type!="function"&&type!="undefined"){ret+="["+vtob(vars)+","+vtob(hist.linkVars[vars])}}return ret};History.decodeHistory=function(str,prev){var name,splits,variable,c,d,ret={variables:clone(prev.variables)||{}},match=/([a-z0-9]+)((?:\$[A-Za-z0-9\+\/=]+,[A-Za-z0-9\+\/=]+)*)((?:\[[A-Za-z0-9\+\/=]+,[A-Za-z0-9\+\/=]+)*)/g.exec(str);function btov(str){try{return recompile(JSON.parse(decodeURIComponent(escape(window.atob(str)))))}catch(e){return 0
}}if(match){name=parseInt(match[1],36);if(!tale.has(name)){return false
}if(match[2]){ret.variables||(ret.variables={});splits=match[2].split("$");for(c=0;c<splits.length;c++){variable=splits[c].split(",");d=btov(variable[0]);if(d){ret.variables[d]=btov(variable[1])}}}if(match[3]){ret.linkVars||(ret.linkVars={});splits=match[3].split("[");for(c=0;c<splits.length;c++){variable=splits[c].split(",");d=btov(variable[0]);if(d){ret.linkVars[d]=btov(variable[1])}}}ret.passage=tale.get(name);return ret}};History.prototype.save=function(){var hist,b,a="";for(b=this.history.length-1;b>=0;b--){hist=this.history[b];if(!hist){break
}a+=this.encodeHistory(b)}return"#"+a};History.prototype.restore=function(){var a,b,c,vars;try{if(!window.location.hash||(window.location.hash=="#")){if(testplay){if(tale.has("StoryInit")){new Wikifier(insertElement(null,"span"),tale.get("StoryInit").text)}this.display(testplay,null,"quietly");return true}return false}if(window.location.hash.substr(0,2)=="#!"){c=window.location.hash.substr(2).split("_").join(" ");this.display(c,null,"quietly");return true}a=window.location.hash.replace("#","").split(".");for(b=0;b<a.length;b++){vars=History.decodeHistory(a[b],vars||{});if(vars){if(b==a.length-1){vars.variables=clone(this.history[0].variables);for(c in this.history[0].linkVars){vars.variables[c]=clone(this.history[0].linkVars[c])}this.history.unshift(vars);this.display(vars.passage.title,null,"back")}else{this.history.unshift(vars)}}}return true}catch(d){return false
}};History.prototype.saveVariables=function(c,el,callback){if(typeof callback=="function"){callback.call(el)}this.history.unshift({passage:c,variables:clone(this.history[0].variables)})};var restart=History.prototype.restart=function(){if(typeof window.history.replaceState=="function"){(typeof this.pushState=="function")&&this.pushState(true,window.location.href.replace(/#.*$/,""));window.location.reload()}else{window.location.hash=""}};var version={major:4,minor:2,revision:0,date:new Date("2014"),extensions:{}};var testplay,tale,state,prerender={},postrender={},macros=window.macros={};version.extensions.displayMacro={major:2,minor:0,revision:0};macros.display={parameters:[],handler:function(place,macroName,params,parser){var t,j,output,oldDisplayParams,name=parser.fullArgs();if(macroName!="display"){output=macroName;params=parser.fullMatch().replace(/^\S*|>>$/g,"").readMacroParams(true);try{for(j=0;j<params.length;j++){params[j]=internalEval(Wikifier.parse(params[j]))}}catch(e){throwError(place,parser.fullMatch()+" bad argument: "+params[j],parser.fullMatch());return}}else{try{output=internalEval(name)}catch(e){}if(output==null){if(tale.has(name)){output=name
}}}if(!output){throwError(place,"<<"+macroName+'>>: "'+name+'" did not evaluate to a passage name',parser.fullMatch())}else{if(!tale.has(output+"")){throwError(place,"<<"+macroName+'>>: The "'+output+'" passage does not exist',parser.fullMatch())}else{oldDisplayParams=this.parameters;this.parameters=params;t=tale.get(output+"");if(t.tags.indexOf("script")>-1){scriptEval(t)}else{new Wikifier(place,t.processText())}this.parameters=oldDisplayParams
}}}};version.extensions.actionsMacro={major:1,minor:2,revision:0};macros.actions={handler:function(a,f,g){var v=state.history[0].variables,e=insertElement(a,"ul");if(!v["actions clicked"]){v["actions clicked"]={}}for(var b=0;b<g.length;b++){if(v["actions clicked"][g[b]]){continue
}var d=insertElement(e,"li");var c=Wikifier.createInternalLink(d,g[b],(function(link){return function(){state.history[0].variables["actions clicked"][link]=true}}(g[b])));insertText(c,g[b])}}};version.extensions.printMacro={major:1,minor:1,revision:1};macros.print={handler:function(place,macroName,params,parser){var args=parser.fullArgs(macroName!="print"),output;try{output=internalEval(args);if(output!=null&&(typeof output!="number"||!isNaN(output))){new Wikifier(place,""+output)}}catch(e){throwError(place,"<<print>> bad expression: "+params.join(" "),parser.fullMatch())}}};version.extensions.setMacro={major:1,minor:1,revision:0};macros.set={handler:function(a,b,c,parser){macros.set.run(a,parser.fullArgs(),parser,c.join(" "))},run:function(a,expression,parser,original){try{return internalEval(expression)}catch(e){throwError(a,"bad expression: "+(original||expression),parser?parser.fullMatch():expression)}}};version.extensions.ifMacros={major:2,minor:0,revision:0};macros["if"]={handler:function(place,macroName,params,parser){var conditions=[],clauses=[],rawConds=[],srcOffset=parser.source.indexOf(">>",parser.matchStart)+2,src=parser.source.slice(srcOffset),endPos=-1,rawCond=params.join(" "),currentCond=parser.fullArgs(),currentClause="",t=0,nesting=0,i=0;for(;i<src.length;i++){if((src.substr(i,6)=="<<else")&&!nesting){rawConds.push(rawCond);conditions.push(currentCond.trim());clauses.push(currentClause);currentClause="";t=src.indexOf(">>",i+6);if(src.substr(i+6,4)==" if "||src.substr(i+6,3)=="if "){rawCond=src.slice(i+9,t);currentCond=Wikifier.parse(rawCond)}else{rawCond="";currentCond="true"}i=t+2}if(src.substr(i,5)=="<<if "){nesting++
}if(src.substr(i,9)=="<<endif>>"){nesting--;if(nesting<0){endPos=srcOffset+i+9;rawConds.push(rawCond);conditions.push(currentCond.trim());clauses.push(currentClause);break}}currentClause+=src.charAt(i)}if(endPos!=-1){parser.nextMatch=endPos;try{for(i=0;i<clauses.length;i++){if(internalEval(conditions[i])){new Wikifier(place,clauses[i]);break}}}catch(e){throwError(place,"<<"+(i?"else ":"")+"if>> bad condition: "+rawConds[i],!i?parser.fullMatch():"<<else if "+rawConds[i]+">>")}}else{throwError(place,"I can't find a matching <<endif>>",parser.fullMatch())}}};macros["else"]=macros.elseif=macros.endif={handler:function(){}};version.extensions.rememberMacro={major:2,minor:0,revision:0};macros.remember={handler:function(place,macroName,params,parser){var variable,value,re,match,statement=params.join(" ");macros.set.run(place,parser.fullArgs(),null,params.join(" "));if(!window.localStorage){throwError(place,"<<remember>> can't be used "+(window.location.protocol=="file:"?" by local HTML files ":"")+" in this browser.",parser.fullMatch());return}re=new RegExp(Wikifier.textPrimitives.variable,"g");while(match=re.exec(statement)){variable=match[1];value=state.history[0].variables[variable];try{value=JSON.stringify(value)}catch(e){throwError(place,"can't <<remember>> the variable $"+variable+" ("+(typeof value)+")",parser.fullMatch());return}window.localStorage[this.prefix+variable]=value}},init:function(){var i,variable,value;if(tale.has("StoryTitle")){this.prefix="Twine."+tale.title+"."}else{this.prefix="Twine.Untitled Story."}for(i in window.localStorage){if(i.indexOf(this.prefix)==0){variable=i.substr(this.prefix.length);value=window.localStorage[i];try{value=JSON.parse(value);state.history[0].variables[variable]=value}catch(e){}}}},expire:null,prefix:null};version.extensions.forgetMacro={major:1,minor:0,revision:0};macros.forget={handler:function(place,macroName,params){var re,match,variable,statement=params.join(" ");re=new RegExp(Wikifier.textPrimitives.variable,"g");while(match=re.exec(statement)){variable=match[1]+"";delete state.history[0].variables[variable];delete window.localStorage[macros.remember.prefix+variable]}}};version.extensions.SilentlyMacro={major:1,minor:1,revision:0};macros.nobr=macros.silently={handler:function(place,macroName,f,parser){var i,h=insertElement(null,"div"),k=parser.source.indexOf(">>",parser.matchStart)+2,a=parser.source.slice(k),d=-1,c="",l=0;for(i=0;i<a.length;i++){if(a.substr(i,macroName.length+7)=="<<end"+macroName+">>"){if(l==0){d=k+i+macroName.length+7;break}else{l--
}}else{if(a.substr(i,macroName.length+4)=="<<"+macroName+">>"){l++
}}if(macroName=="nobr"&&a.charAt(i)=="\n"){c+="\u200c"}else{c+=a.charAt(i)}}if(d!=-1){new Wikifier(macroName=="nobr"?place:h,c);parser.nextMatch=d}else{throwError(place,"can't find matching <<end"+macroName+">>",parser.fullMatch())}}};macros.endsilently={handler:function(){}};version.extensions.choiceMacro={major:2,minor:0,revision:0};macros.choice={callback:function(){var i,other,passage=findPassageParent(this);if(passage){other=passage.querySelectorAll(".choice");for(i=0;i<other.length;i++){other[i].outerHTML="<span class=disabled>"+other[i].innerHTML+"</span>"}state.history[0].variables["choice clicked"][passage.id.replace(/\|[^\]]*$/,"")]=true}},handler:function(A,C,D,parser){var link,id,match,text=D[1]||D[0].split("|")[0],passage=findPassageParent(A);if(!passage){throwError(A,"<<"+C+">> can't be used here.",parser.fullMatch());return}id=(passage&&passage.id.replace(/\|[^\]]*$/,""));if(id&&(state.history[0].variables["choice clicked"]||(state.history[0].variables["choice clicked"]={}))[id]){insertElement(A,"span",null,"disabled",text)}else{match=new RegExp(Wikifier.linkFormatter.lookahead).exec(parser.fullMatch());if(match){link=Wikifier.linkFormatter.makeLink(A,match,this.callback)}else{link=Wikifier.linkFormatter.makeLink(A,[0,text,D[0]],this.callback)}link.className+=" "+C}}};version.extensions.backMacro={major:2,minor:0,revision:0};macros.back={labeltext:"&#171; back",handler:function(a,b,e,parser){var labelParam,c,el,labeltouse=this.labeltext,steps=1,stepsParam=e.indexOf("steps"),stepsParam2="";if(stepsParam>0){stepsParam2=e[stepsParam-1];if(stepsParam2[0]=="$"){try{stepsParam2=internalEval(Wikifier.parse(stepsParam2))}catch(r){throwError(a,parser.fullMatch()+" bad expression: "+r.message,parser.fullMatch());return}}steps=+stepsParam2;if(steps>=state.history.length-1){steps=state.history.length-2}e.splice(stepsParam-1,2)}labelParam=e.indexOf("label");if(labelParam>-1){if(!e[labelParam+1]){throwError(a,parser.fullMatch()+": "+e[labelParam]+" keyword needs an additional label parameter",parser.fullMatch());return}labeltouse=e[labelParam+1];e.splice(labelParam,2)}if(stepsParam<=0){if(e[0]){if(e[0].charAt(0)=="$"){try{e=internalEval(Wikifier.parse(e[0]))}catch(r){throwError(a,parser.fullMatch()+" bad expression: "+r.message,parser.fullMatch());return}}else{e=e[0]}if(!tale.has(e)){throwError(a,'The "'+e+'" passage does not exist',parser.fullMatch());return}for(c=0;c<state.history.length;c++){if(state.history[c].passage.title==e){steps=c;break}}}}el=document.createElement("a");el.className=b;addClickHandler(el,(function(b){return function(){return macros.back.onclick(b=="back",steps,el)}}(b)));el.innerHTML=labeltouse;a.appendChild(el)}};version.extensions.returnMacro={major:2,minor:0,revision:0};macros["return"]={labeltext:"&#171; return",handler:function(a,b,e){macros.back.handler.call(this,a,b,e)}};version.extensions.textInputMacro={major:2,minor:0,revision:0};macros.checkbox=macros.radio=macros.textinput={handler:function(A,C,D,parser){var match,class_=C.replace("input","Input"),q=A.querySelectorAll("input"),id=class_+"|"+((q&&q.length)||0);input=insertElement(null,"input",id,class_);input.name=D[0];input.type=C.replace("input","");A.appendChild(input);if(C=="textinput"&&D[1]){match=new RegExp(Wikifier.linkFormatter.lookahead).exec(parser.fullMatch());if(match){Wikifier.linkFormatter.makeLink(A,match,macros.button.callback,"button")}else{Wikifier.linkFormatter.makeLink(A,[0,(D[2]||D[1]),D[1]],macros.button.callback,"button")}}else{if((C=="radio"||C=="checkbox")&&D[1]){input.value=D[1];insertElement(A,"label","","",D[1]).setAttribute("for",id);if(D[2]){insertElement(A,"br");D.splice(1,1);macros[C].handler(A,C,D)}}}}};version.extensions.buttonMacro={major:1,minor:0,revision:0};macros.button={callback:function(){var el=findPassageParent(this);if(el){var inputs=el.querySelectorAll("input");for(i=0;i<inputs.length;i++){if(inputs[i].type!="checkbox"&&(inputs[i].type!="radio"||inputs[i].checked)){macros.set.run(null,Wikifier.parse(inputs[i].name+' = "'+inputs[i].value.replace(/"/g,'\\"')+'"'))}else{if(inputs[i].type=="checkbox"&&inputs[i].checked){macros.set.run(null,Wikifier.parse(inputs[i].name+" = [].concat("+inputs[i].name+" || []);"));macros.set.run(null,Wikifier.parse(inputs[i].name+'.push("'+inputs[i].value.replace(/"/g,'\\"')+'")'))}}}}},handler:function(A,C,D,parser){var link,match=new RegExp(Wikifier.linkFormatter.lookahead).exec(parser.fullMatch());if(match){Wikifier.linkFormatter.makeLink(A,match,this.callback,"button")}else{Wikifier.linkFormatter.makeLink(A,[0,D[1]||D[0],D[0]],this.callback,"button")}}};function Passage(c,b,a,ofunc){var t;if(!this||this.constructor!=Passage){throw new ReferenceError("passage() must be in lowercase")}this.title=c;ofunc=typeof ofunc=="function"&&ofunc;if(b){this.id=a;this.tags=b.getAttribute("tags");if(typeof this.tags=="string"){if(ofunc){this.tags=ofunc(this.tags)}this.tags=this.tags.readBracketedList()}else{this.tags=[]}t=b.firstChild?b.firstChild.nodeValue:"";if(ofunc&&!this.isImage()){this.text=ofunc(Passage.unescapeLineBreaks(t))}else{this.text=Passage.unescapeLineBreaks(t)}if(!this.isImage()){this.preloadImages()}if(/\.char\b|\[data\-char\b/.exec(this.text)&&Wikifier.charSpanFormatter){Wikifier.formatters.push(Wikifier.charSpanFormatter);delete Wikifier.charSpanFormatter}}else{this.text="@@This passage does not exist: "+c+"@@";this.tags=[]}}Passage.prototype.isImage=function(){return !!~(this.tags.indexOf("Twine.image"))};Passage.prototype.preloadImages=function(){var u="\\s*['\"]?([^\"'$]+\\.(jpe?g|a?png|gif|bmp|webp|svg))['\"]?\\s*",k=function(c,e){var i,d;do{d=c.exec(this.text);if(d){i=new Image();i.src=d[e]}}while(d);return k};k.call(this,new RegExp(Wikifier.imageFormatter.lookahead.replace("[^\\[\\]\\|]+",u),"mg"),4).call(this,new RegExp("url\\s*\\("+u+"\\)","mig"),1).call(this,new RegExp("src\\s*="+u,"mig"),1)};Passage.unescapeLineBreaks=function(a){if(a&&typeof a=="string"){return a.replace(/\\n/mg,"\n").replace(/\\t/mg,"\t").replace(/\\s/mg,"\\").replace(/\\/mg,"\\").replace(/\r/mg,"")}else{return""
}};Passage.prototype.setTags=function(b){var t=this.tags!=null&&this.tags.length?this.tags.join(" "):"";if(t){b.setAttribute("data-tags",this.tags.join(" "))}document.body.setAttribute("data-tags",t)};Passage.prototype.processText=function(){var ret=this.text;if(~this.tags.indexOf("nobr")){ret=ret.replace(/\n/g,"\u200c")}if(this.isImage()){ret="[img["+ret+"]]"}return ret};function Tale(){var a,b,c,lines,i,kv,nsc,isImage,settings=this.storysettings={lookup:function(a,dfault){if(!(a in this)){return dfault
}return(this[a]+"")!="off"}},tiddlerTitle="";window.tale=this;this.passages={};if(document.normalize){document.normalize()}a=document.getElementById("storeArea").children;for(b=0;b<a.length;b++){c=a[b];if(c.getAttribute&&c.getAttribute("tiddler")=="StorySettings"){lines=new Passage("StorySettings",c,0,null,null).text.split("\n");for(i in lines){if(typeof lines[i]=="string"&&lines[i].indexOf(":")>-1){kv=lines[i].toLowerCase().split(":");kv[0]=kv[0].replace(/^\s+|\s+$/g,"");kv[1]=kv[1].replace(/^\s+|\s+$/g,"");if(kv[0]!="lookup"){settings[kv[0]]=kv[1]}}}}}if(settings.obfuscate=="rot13"){for(b=0;b<a.length;b++){c=a[b];if(c.getAttribute&&(tiddlerTitle=c.getAttribute("tiddler"))){isImage=(c.getAttribute("tags")+"").indexOf("Twine.image")>-1;if(tiddlerTitle!="StorySettings"&&!isImage){tiddlerTitle=rot13(tiddlerTitle)}this.passages[tiddlerTitle]=new Passage(tiddlerTitle,c,b+1,!isImage&&rot13)
}}}else{for(b=0;b<a.length;b++){c=a[b];if(c.getAttribute&&(tiddlerTitle=c.getAttribute("tiddler"))){this.passages[tiddlerTitle]=new Passage(tiddlerTitle,c,b,null,null)}}}}Tale.prototype.has=function(a){if(typeof a=="string"){return(this.passages[a]!=null)}else{for(var i in this.passages){if(this.passages[i].id==a){return true
}}return false}};Tale.prototype.get=function(a){if(typeof a=="string"){return this.passages[a]||new Passage(a)}else{for(var i in this.passages){if(this.passages[i].id==a){return this.passages[i]}}}};Tale.prototype.lookup=function(h,g,a){var d=[];for(var c in this.passages){var f=this.passages[c];for(var b=0;b<f[h].length;b++){if(f[h][b]==g){d.push(f)}}}if(!a){a="title"
}d.sort(function(k,j){if(k[a]==j[a]){return(0)}else{return(k[a]<j[a])?-1:+1}});return d};Tale.prototype.canUndo=function(){return this.storysettings.lookup("undo",true)};Tale.prototype.identity=function(){var meta=document.querySelector("meta[name='identity']"),identity=meta?meta.getAttribute("content"):"story";return(Tale.prototype.identity=function(){return identity
})()};Tale.prototype.forEachStylesheet=function(tags,callback){var passage,i;tags=tags||[];if(typeof callback!="function"){return
}for(passage in this.passages){passage=tale.passages[passage];if(passage&&~passage.tags.indexOf("stylesheet")){for(i=0;i<tags.length;i++){if(~passage.tags.indexOf(tags[i])){callback(passage);break}}}}};Tale.prototype.setPageElements=function(){var storyTitle,defaultTitle="testingu";setPageElement("storyTitle","StoryTitle",defaultTitle);storyTitle=document.getElementById("storyTitle");document.title=this.title=(storyTitle&&(storyTitle.textContent||storyTitle.innerText))||defaultTitle;setPageElement("storySubtitle","StorySubtitle","");if(tale.has("StoryAuthor")){setPageElement("titleSeparator",null,"\n");setPageElement("storyAuthor","StoryAuthor","")}if(tale.has("StoryMenu")){document.getElementById("storyMenu").setAttribute("style","");setPageElement("storyMenu","StoryMenu","")}};function Wikifier(place,source){this.source=source;this.output=place;this.nextMatch=0;this.assembleFormatterMatches(Wikifier.formatters);this.subWikify(this.output)}Wikifier.textPrimitives={upperLetter:"[A-Z\u00c0-\u00de\u0150\u0170]",lowerLetter:"[a-z\u00df-\u00ff_0-9\\-\u0151\u0171]",anyLetter:"[A-Za-z\u00c0-\u00de\u00df-\u00ff_0-9\\-\u0150\u0170\u0151\u0171]"};Wikifier.textPrimitives.variable="\\$((?:"+Wikifier.textPrimitives.anyLetter.replace("\\-","")+"*"+Wikifier.textPrimitives.anyLetter.replace("0-9\\-","")+"+"+Wikifier.textPrimitives.anyLetter.replace("\\-","")+"*)+)";Wikifier.textPrimitives.unquoted="(?=(?:[^\"'\\\\]*(?:\\\\.|'(?:[^'\\\\]*\\\\.)*[^'\\\\]*'|\"(?:[^\"\\\\]*\\\\.)*[^\"\\\\]*\"))*[^'\"]*$)";Wikifier.prototype.assembleFormatterMatches=function(formatters){this.formatters=[];var pattern=[];for(var n=0;n<formatters.length;n++){pattern.push("("+formatters[n].match+")");this.formatters.push(formatters[n])}this.formatterRegExp=new RegExp(pattern.join("|"),"mg")};Wikifier.prototype.subWikify=function(output,terminator){var terminatorMatch,formatterMatch,oldOutput=this.output;this.output=output;var terminatorRegExp=terminator?new RegExp("("+terminator+")","mg"):null;do{this.formatterRegExp.lastIndex=this.nextMatch;if(terminatorRegExp){terminatorRegExp.lastIndex=this.nextMatch}formatterMatch=this.formatterRegExp.exec(this.source);terminatorMatch=terminatorRegExp?terminatorRegExp.exec(this.source):null;if(terminatorMatch&&(!formatterMatch||terminatorMatch.index<=formatterMatch.index)){if(terminatorMatch.index>this.nextMatch){this.outputText(this.output,this.nextMatch,terminatorMatch.index)}this.matchStart=terminatorMatch.index;this.matchLength=terminatorMatch[1].length;this.matchText=terminatorMatch[1];this.nextMatch=terminatorMatch.index+terminatorMatch[1].length;this.output=oldOutput;return}else{if(formatterMatch){if(formatterMatch.index>this.nextMatch){this.outputText(this.output,this.nextMatch,formatterMatch.index)}this.matchStart=formatterMatch.index;this.matchLength=formatterMatch[0].length;this.matchText=formatterMatch[0];this.nextMatch=this.formatterRegExp.lastIndex;var matchingFormatter=-1;for(var t=1;t<formatterMatch.length;t++){if(formatterMatch[t]){matchingFormatter=t-1;break}}if(matchingFormatter!=-1){this.formatters[matchingFormatter].handler(this)}}}}while(terminatorMatch||formatterMatch);if(this.nextMatch<this.source.length){this.outputText(this.output,this.nextMatch,this.source.length);this.nextMatch=this.source.length}this.output=oldOutput};Wikifier.prototype.outputText=function(place,startPos,endPos){if(place){insertText(place,this.source.substring(startPos,endPos))}};Wikifier.prototype.fullMatch=function(){return this.source.slice(this.matchStart,this.source.indexOf(">>",this.matchStart)+2)};Wikifier.prototype.fullArgs=function(includeName){var source=this.source.replace(/\u200c/g," "),endPos=this.nextMatch-2,startPos=source.indexOf(includeName?"<<":" ",this.matchStart);if(!~startPos||!~endPos||endPos<=startPos){return""
}return Wikifier.parse(source.slice(startPos+(includeName?2:1),endPos).trim())};Wikifier.parse=function(input){var m,re,b=input,found=[],g=Wikifier.textPrimitives.unquoted;function alter(from,to){b=b.replace(new RegExp(from+g,"gim"),to);return alter}re=new RegExp(Wikifier.textPrimitives.variable+g,"gi");while(m=re.exec(input)){if(!~found.indexOf(m[0])){b=m[0]+" == null && ("+m[0]+" = 0);"+b;found.push(m[0])}}alter(Wikifier.textPrimitives.variable,"state.history[0].variables.$1")("\\beq\\b"," == ")("\\bneq\\b"," != ")("\\bgt\\b"," > ")("\\bgte\\b"," >= ")("\\blt\\b"," < ")("\\blte\\b"," <= ")("\\band\\b"," && ")("\\bor\\b"," || ")("\\bnot\\b"," ! ")("\\bis\\b"," == ")("\\bto\\b"," = ");return b};Wikifier.formatHelpers={charFormatHelper:function(a){var b=insertElement(a.output,this.element);a.subWikify(b,this.terminator)},inlineCssHelper:function(w){var s,v,lookaheadMatch,gotMatch,styles=[],lookahead=Wikifier.styleByCharFormatter.lookahead,lookaheadRegExp=new RegExp(lookahead,"mg"),hadStyle=false,unDash=function(str){var s=str.split("-");if(s.length>1){for(var t=1;t<s.length;t++){s[t]=s[t].substr(0,1).toUpperCase()+s[t].substr(1)}}return s.join("")};styles.className="";do{lookaheadRegExp.lastIndex=w.nextMatch;lookaheadMatch=lookaheadRegExp.exec(w.source);gotMatch=lookaheadMatch&&lookaheadMatch.index==w.nextMatch;if(gotMatch){hadStyle=true;if(lookaheadMatch[5]){styles.className+=lookaheadMatch[5].replace(/\./g," ")+" "}else{if(lookaheadMatch[1]){s=unDash(lookaheadMatch[1]);v=lookaheadMatch[2]}else{s=unDash(lookaheadMatch[3]);v=lookaheadMatch[4]}}switch(s){case"bgcolor":s="backgroundColor";break;case"float":s="cssFloat";break}styles.push({style:s,value:v});w.nextMatch=lookaheadMatch.index+lookaheadMatch[0].length}}while(gotMatch);return styles},monospacedByLineHelper:function(w){var lookaheadRegExp=new RegExp(this.lookahead,"mg");lookaheadRegExp.lastIndex=w.matchStart;var lookaheadMatch=lookaheadRegExp.exec(w.source);if(lookaheadMatch&&lookaheadMatch.index==w.matchStart){insertElement(w.output,"pre",null,null,lookaheadMatch[1]);w.nextMatch=lookaheadMatch.index+lookaheadMatch[0].length}}};Wikifier.formatters=[{name:"table",match:"^\\|(?:[^\\n]*)\\|(?:[fhc]?)$",lookahead:"^\\|([^\\n]*)\\|([fhc]?)$",rowTerminator:"\\|(?:[fhc]?)$\\n?",cellPattern:"(?:\\|([^\\n\\|]*)\\|)|(\\|[fhc]?$\\n?)",cellTerminator:"(?:\\x20*)\\|",rowTypes:{"c":"caption","h":"thead","":"tbody","f":"tfoot"},handler:function(w){var rowContainer,rowElement,lookaheadMatch,matched,table=insertElement(w.output,"table"),lookaheadRegExp=new RegExp(this.lookahead,"mg"),currRowType=null,nextRowType,prevColumns=[],rowCount=0;w.nextMatch=w.matchStart;do{lookaheadRegExp.lastIndex=w.nextMatch;lookaheadMatch=lookaheadRegExp.exec(w.source),matched=lookaheadMatch&&lookaheadMatch.index==w.nextMatch;if(matched){nextRowType=lookaheadMatch[2];if(nextRowType!=currRowType){rowContainer=insertElement(table,this.rowTypes[nextRowType])}currRowType=nextRowType;if(currRowType=="c"){if(rowCount==0){rowContainer.setAttribute("align","top")}else{rowContainer.setAttribute("align","bottom")}w.nextMatch=w.nextMatch+1;w.subWikify(rowContainer,this.rowTerminator)}else{rowElement=insertElement(rowContainer,"tr");this.rowHandler(w,rowElement,prevColumns)}rowCount++}}while(matched)},rowHandler:function(w,e,prevColumns){var cellMatch,matched,col=0,currColCount=1,cellRegExp=new RegExp(this.cellPattern,"mg");do{cellRegExp.lastIndex=w.nextMatch;cellMatch=cellRegExp.exec(w.source);matched=cellMatch&&cellMatch.index==w.nextMatch;if(matched){if(cellMatch[1]=="~"){var last=prevColumns[col];if(last){last.rowCount++;last.element.setAttribute("rowSpan",last.rowCount);last.element.setAttribute("rowspan",last.rowCount);last.element.valign="center"}w.nextMatch=cellMatch.index+cellMatch[0].length-1}else{if(cellMatch[1]==">"){currColCount++;w.nextMatch=cellMatch.index+cellMatch[0].length-1}else{if(cellMatch[2]){w.nextMatch=cellMatch.index+cellMatch[0].length;break}else{var spaceLeft=false,spaceRight=false,lastColCount,lastColElement,styles,cell,t;w.nextMatch++;styles=Wikifier.formatHelpers.inlineCssHelper(w);while(w.source.substr(w.nextMatch,1)==" "){spaceLeft=true;w.nextMatch++}if(w.source.substr(w.nextMatch,1)=="!"){cell=insertElement(e,"th");w.nextMatch++}else{cell=insertElement(e,"td")}prevColumns[col]={rowCount:1,element:cell};lastColCount=1;lastColElement=cell;if(currColCount>1){cell.setAttribute("colSpan",currColCount);cell.setAttribute("colspan",currColCount);currColCount=1}for(t=0;t<styles.length;t++){cell.style[styles[t].style]=styles[t].value}w.subWikify(cell,this.cellTerminator);if(w.matchText.substr(w.matchText.length-2,1)==" "){spaceRight=true
}if(spaceLeft&&spaceRight){cell.align="center"}else{if(spaceLeft){cell.align="right"}else{if(spaceRight){cell.align="left"}}}w.nextMatch=w.nextMatch-1}}}col++}}while(matched)}},{name:"rule",match:"^----$\\n?",handler:function(w){insertElement(w.output,"hr")}},{name:"emdash",match:"--",becomes:String.fromCharCode(8212),handler:function(a){insertElement(a.output,"span",null,"char",this.becomes).setAttribute("data-char","emdash")}},{name:"heading",match:"^!{1,5}",terminator:"\\n",handler:function(w){var e=insertElement(w.output,"h"+w.matchLength);w.subWikify(e,this.terminator)}},{name:"monospacedByLine",match:"^\\{\\{\\{\\n",lookahead:"^\\{\\{\\{\\n((?:^[^\\n]*\\n)+?)(^\\}\\}\\}$\\n?)",handler:Wikifier.formatHelpers.monospacedByLineHelper},{name:"quoteByBlock",match:"^<<<\\n",terminator:"^<<<\\n",handler:function(w){var e=insertElement(w.output,"blockquote");w.subWikify(e,this.terminator)}},{name:"list",match:"^(?:(?:\\*+)|(?:#+))",lookahead:"^(?:(\\*+)|(#+))",terminator:"\\n",handler:function(w){var newType,newLevel,t,len,bulletType,lookaheadMatch,matched,lookaheadRegExp=new RegExp(this.lookahead,"mg"),placeStack=[w.output],currType=null,currLevel=0;w.nextMatch=w.matchStart;do{lookaheadRegExp.lastIndex=w.nextMatch;lookaheadMatch=lookaheadRegExp.exec(w.source);matched=lookaheadMatch&&lookaheadMatch.index==w.nextMatch;if(matched){newLevel=lookaheadMatch[0].length;if(lookaheadMatch[1]){bulletType=lookaheadMatch[1].slice(-1);newType="ul"}else{if(lookaheadMatch[2]){newType="ol"
}}w.nextMatch+=newLevel;if(newLevel>currLevel){for(t=currLevel;t<newLevel;t++){placeStack.push(insertElement(placeStack[placeStack.length-1],newType))}}else{if(newLevel<currLevel){for(t=currLevel;t>newLevel;t--){placeStack.pop()}}else{if(newLevel==currLevel&&newType!=currType){placeStack.pop();placeStack.push(insertElement(placeStack[placeStack.length-1],newType))}}}currLevel=newLevel;currType=newType;t=insertElement(placeStack[placeStack.length-1],"li");if(bulletType&&bulletType!="*"){t.setAttribute("data-bullet",bulletType)}w.subWikify(t,this.terminator)}}while(matched)}},(Wikifier.urlFormatter={name:"urlLink",match:"(?:https?|mailto|javascript|ftp|data):[^\\s'\"]+(?:/|\\b)",handler:function(w){var e=Wikifier.createExternalLink(w.output,w.matchText);w.outputText(e,w.matchStart,w.nextMatch)}}),(Wikifier.linkFormatter={name:"prettyLink",match:"\\[\\[",lookahead:"\\[\\[([^\\|]*?)(?:\\|(.*?))?\\](?:\\[(.*?)])?\\]",makeInternalOrExternal:function(out,title,callback,type){if(title&&!tale.has(title)&&(title.match(Wikifier.urlFormatter.match,"g")||~title.search(/[\.\\\/#]/))){return Wikifier.createExternalLink(out,title,callback,type)
}else{return Wikifier.createInternalLink(out,title,callback,type)}},makeCallback:function(code,callback){return function(){macros.set.run(null,Wikifier.parse(code),null,code);typeof callback=="function"&&callback.call(this)}},makeLink:function(out,match,callback2,type){var link,title,callback;if(match[3]){callback=this.makeCallback(match[3],callback2)}else{typeof callback2=="function"&&(callback=callback2)}title=Wikifier.parsePassageTitle(match[2]||match[1]);link=this.makeInternalOrExternal(out,title,callback,type);setPageElement(link,null,match[2]?match[1]:title);return link},handler:function(w){var lookaheadRegExp=new RegExp(this.lookahead,"mg");lookaheadRegExp.lastIndex=w.matchStart;var lookaheadMatch=lookaheadRegExp.exec(w.source);if(lookaheadMatch&&lookaheadMatch.index==w.matchStart){this.makeLink(w.output,lookaheadMatch);w.nextMatch=lookaheadMatch.index+lookaheadMatch[0].length}}}),(Wikifier.imageFormatter={name:"image",match:"\\[(?:[<]{0,1})(?:[>]{0,1})[Ii][Mm][Gg]\\[",lookahead:"\\[([<]?)(>?)img\\[(?:([^\\|\\]]+)\\|)?([^\\[\\]\\|]+)\\](?:\\[([^\\]]*)\\]?)?(\\])",importedImage:function(img,passageName){var imgPassages,imgname;try{imgname=internalEval(Wikifier.parse(passageName))}catch(e){}if(!imgname){imgname=passageName
}imgPassages=tale.lookup("tags","Twine.image");for(j=0;j<imgPassages.length;j++){if(imgPassages[j].title==imgname){img.src=imgPassages[j].text;break}}},handler:function(w){var e,img,j,lookaheadMatch,lookaheadRegExp=new RegExp(this.lookahead,"mig");lookaheadRegExp.lastIndex=w.matchStart;lookaheadMatch=lookaheadRegExp.exec(w.source);if(lookaheadMatch&&lookaheadMatch.index==w.matchStart){e=w.output,title=Wikifier.parsePassageTitle(lookaheadMatch[5]);if(title){e=Wikifier.linkFormatter.makeInternalOrExternal(w.output,title)}img=insertElement(e,"img");if(lookaheadMatch[1]){img.align="left"}else{if(lookaheadMatch[2]){img.align="right"}}if(lookaheadMatch[3]){img.title=lookaheadMatch[3]}this.importedImage(img,lookaheadMatch[4]);w.nextMatch=lookaheadMatch.index+lookaheadMatch[0].length}}}),{name:"macro",match:"<<",lookahead:/<<([^>\s]+)(?:\s*)((?:\\.|'(?:[^'\\]*\\.)*[^'\\]*'|"(?:[^"\\]*\\.)*[^"\\]*"|[^'"\\>]|>(?!>))*)>>/mg,handler:function(w){var lookaheadRegExp=new RegExp(this.lookahead);lookaheadRegExp.lastIndex=w.matchStart;var lookaheadMatch=lookaheadRegExp.exec(w.source.replace(/\u200c/g,"\n"));if(lookaheadMatch&&lookaheadMatch.index==w.matchStart&&lookaheadMatch[1]){var params=lookaheadMatch[2].readMacroParams();w.nextMatch=lookaheadMatch.index+lookaheadMatch[0].length;var name=lookaheadMatch[1];try{var macro=macros[name];if(macro&&typeof macro=="object"&&macro.handler){macro.handler(w.output,name,params,w)}else{if(name[0]=="$"){macros.print.handler(w.output,name,[name].concat(params),w)}else{if(tale.has(name)){macros.display.handler(w.output,name,[name].concat(params),w)}else{throwError(w.output,'No macro or passage called "'+name+'"',w.fullMatch())}}}}catch(e){throwError(w.output,"Error executing macro "+name+": "+e.toString(),w.fullMatch())}}}},{name:"html",match:"<html>",lookahead:"<html>((?:.|\\n)*?)</html>",handler:function(w){var lookaheadRegExp=new RegExp(this.lookahead,"mg");lookaheadRegExp.lastIndex=w.matchStart;var lookaheadMatch=lookaheadRegExp.exec(w.source);if(lookaheadMatch&&lookaheadMatch.index==w.matchStart){var e=insertElement(w.output,"span");e.innerHTML=lookaheadMatch[1];w.nextMatch=lookaheadMatch.index+lookaheadMatch[0].length}}},{name:"commentByBlock",match:"/%",lookahead:"/%((?:.|\\n)*?)%/",handler:function(w){var lookaheadRegExp=new RegExp(this.lookahead,"mg");lookaheadRegExp.lastIndex=w.matchStart;var lookaheadMatch=lookaheadRegExp.exec(w.source);if(lookaheadMatch&&lookaheadMatch.index==w.matchStart){w.nextMatch=lookaheadMatch.index+lookaheadMatch[0].length}}},{name:"boldByChar",match:"''",terminator:"''",element:"strong",handler:Wikifier.formatHelpers.charFormatHelper},{name:"strikeByChar",match:"==",terminator:"==",element:"strike",handler:Wikifier.formatHelpers.charFormatHelper},{name:"underlineByChar",match:"__",terminator:"__",element:"u",handler:Wikifier.formatHelpers.charFormatHelper},{name:"italicByChar",match:"//",terminator:"//",element:"em",handler:Wikifier.formatHelpers.charFormatHelper},{name:"subscriptByChar",match:"~~",terminator:"~~",element:"sub",handler:Wikifier.formatHelpers.charFormatHelper},{name:"superscriptByChar",match:"\\^\\^",terminator:"\\^\\^",element:"sup",handler:Wikifier.formatHelpers.charFormatHelper},{name:"monospacedByChar",match:"\\{\\{\\{",lookahead:"\\{\\{\\{((?:.|\\n)*?)\\}\\}\\}",handler:function(w){var lookaheadRegExp=new RegExp(this.lookahead,"mg");lookaheadRegExp.lastIndex=w.matchStart;var lookaheadMatch=lookaheadRegExp.exec(w.source);if(lookaheadMatch&&lookaheadMatch.index==w.matchStart){var e=insertElement(w.output,"code",null,null,lookaheadMatch[1]);w.nextMatch=lookaheadMatch.index+lookaheadMatch[0].length}}},(Wikifier.styleByCharFormatter={name:"styleByChar",match:"@@",terminator:"@@",lookahead:"(?:([^\\(@]+)\\(([^\\)\\|\\n]+)(?:\\):))|(?:([^\\.:@]+):([^;\\|\\n]+);)|(?:\\.([^;\\|\\n]+);)",handler:function(w){var e=insertElement(w.output,"span",null,null,null);var styles=Wikifier.formatHelpers.inlineCssHelper(w);if(styles.length==0){e.className="marked"}else{for(var t=0;t<styles.length;t++){e.style[styles[t].style]=styles[t].value}if(typeof styles.className=="string"){e.className=styles.className}}w.subWikify(e,this.terminator)}}),{name:"lineBreak",match:"\\n",handler:function(w){insertElement(w.output,"br")}},{name:"continuedLine",match:"\\\\\\s*?\\n",handler:function(a){a.nextMatch=a.matchStart+2}},{name:"htmlCharacterReference",match:"(?:(?:&#?[a-zA-Z0-9]{2,8};|.)(?:&#?(?:x0*(?:3[0-6][0-9a-fA-F]|1D[c-fC-F][0-9a-fA-F]|20[d-fD-F][0-9a-fA-F]|FE2[0-9a-fA-F])|0*(?:76[89]|7[7-9][0-9]|8[0-7][0-9]|761[6-9]|76[2-7][0-9]|84[0-3][0-9]|844[0-7]|6505[6-9]|6506[0-9]|6507[0-1]));)+|&#?[a-zA-Z0-9]{2,8};)",handler:function(w){var el=document.createElement("div");el.innerHTML=w.matchText;insertText(w.output,el.textContent)}},{name:"htmltag",match:"<(?:\\/?[\\w\\-]+|[\\w\\-]+(?:(?:\\s+[\\w\\-]+(?:\\s*=\\s*(?:\\\".*?\\\"|'.*?'|[^'\\\">\\s]+))?)+\\s*|\\s*)\\/?)>",tagname:"<(\\w+)",voids:["area","base","br","col","embed","hr","img","input","link","meta","param","source","track","wbr"],tableElems:["table","thead","tbody","tfoot","th","tr","td","colgroup","col","caption","figcaption"],cleanupTables:function(e){var i,name,elems=[].slice.call(e.children);for(i=0;i<elems.length;i++){if(elems[i].tagName){name=elems[i].tagName.toLowerCase();if(this.tableElems.indexOf(name)==-1){elems[i].outerHTML=""}else{if(["col","caption","figcaption","td","th"].indexOf(name)==-1){this.cleanupTables.call(this,elems[i])}}}}},handler:function(a){var tmp,passage,setter,e,isvoid,isstyle,lookaheadRegExp,lookaheadMatch,lookahead,re=new RegExp(this.tagname).exec(a.matchText),tn=re&&re[1]&&re[1].toLowerCase();if(tn&&tn!="html"){lookahead="<\\/\\s*"+tn+"\\s*>";isvoid=(this.voids.indexOf(tn)!=-1);isstyle=tn=="style"||tn=="script";lookaheadRegExp=new RegExp(lookahead,"mg");lookaheadRegExp.lastIndex=a.matchStart;lookaheadMatch=lookaheadRegExp.exec(a.source);if(lookaheadMatch||isvoid){if(isstyle){e=document.createElement(tn);e.type="text/css";tmp=a.source.slice(a.nextMatch,lookaheadMatch.index);e.styleSheet?(e.styleSheet.cssText=tmp):(e.innerHTML=tmp);a.nextMatch=lookaheadMatch.index+lookaheadMatch[0].length}else{e=document.createElement(a.output.tagName);e.innerHTML=a.matchText;while(e.firstChild){e=e.firstChild}if(!isvoid){a.subWikify(e,lookahead)}}if(e.tagName.toLowerCase()=="table"){this.cleanupTables.call(this,e)}if(setter=e.getAttribute("data-setter")){setter=Wikifier.linkFormatter.makeCallback(setter)}if(passage=e.getAttribute("data-passage")){if(tn!="img"){addClickHandler(e,Wikifier.linkFunction(Wikifier.parsePassageTitle(passage),e,setter));if(tn=="area"||tn=="a"){e.setAttribute("href","javascript:;")}}else{Wikifier.imageFormatter.importedImage(e,passage)}}a.output.appendChild(e)}else{throwError(a.output,"HTML tag '"+tn+"' wasn't closed.",a.matchText)}}}}];Wikifier.charSpanFormatter={name:"char",match:"[^\n]",handler:function(a){insertElement(a.output,"span",null,"char",a.matchText).setAttribute("data-char",a.matchText==" "?"space":a.matchText=="\t"?"tab":a.matchText)}};Wikifier.parsePassageTitle=function(title){if(title&&!tale.has(title)){try{title=(internalEval(this.parse(title))||title)+""}catch(e){}}return title};Wikifier.linkFunction=function(title,el,callback){return function(){if(state.rewindTo){var passage=findPassageParent(el);if(passage&&passage.parentNode.lastChild!=passage){state.rewindTo(passage,true)}}state.display(title,el,null,callback)}};Wikifier.createInternalLink=function(place,title,callback,type){var tag=(type=="button"?"button":"a"),suffix=(type=="button"?"Button":"Link"),el=insertElement(place,tag);if(tale.has(title)){el.className="internal"+suffix;if(visited(title)){el.className+=" visited"+suffix}}else{el.className="broken"+suffix}addClickHandler(el,Wikifier.linkFunction(title,el,callback));if(place){place.appendChild(el)}return el};Wikifier.createExternalLink=function(place,url,callback,type){var tag=(type=="button"?"button":"a"),el=insertElement(place,tag);el.href=url;el.className="external"+(type=="button"?"Button":"Link");el.target="_blank";if(typeof callback=="function"){addClickHandler(el,callback)}if(place){place.appendChild(el)}return el};function visited(e){var ret=0,i=0;if(!state){return 0
}e=e||state.history[0].passage.title;if(arguments.length>1){for(ret=state.history.length;i<arguments.length;i++){ret=Math.min(ret,visited(arguments[i]))}}else{for(;i<state.history.length&&state.history[i].passage;i++){if(e==state.history[i].passage.title){ret++
}}}return ret}function visitedTag(){var i,j,sh,ret=0,tags=Array.prototype.slice.call(arguments);if(tags.length==1&&typeof tags[0]=="string"){tags=tags.split(" ")}if(!state){return 0
}sh=state.history;for(i=0;i<sh.length&&sh[i].passage;i++){for(j=0;j<tags.length||void ret++;j++){if(sh[i].passage.tags.indexOf(tags[j])==-1){break
}}}return ret}var visitedTags=visitedTag;function turns(){return state.history.length-1}function passage(){return state.history[0].passage.title}function tags(e){var ret=[],i=0;if(!state){return 0
}e=e||state.history[0].passage.title;if(arguments.length>1){for(i=arguments.length-1;i>=1;i--){ret=ret.concat(tags(arguments[i]))}}ret=ret.concat(tale.get(e).tags);return ret}function previous(){if(state&&state.history[1]){for(var d=1;d<state.history.length&&state.history[d].passage;d++){if(state.history[d].passage.title!=state.history[0].passage.title){return state.history[d].passage.title}}}return""}function random(a,b){var from,to;if(!b){from=0;to=a}else{from=Math.min(a,b);to=Math.max(a,b)}to+=1;return ~~((Math.random()*(to-from)))+from}function either(){if(Array.isArray(arguments[0])&&arguments.length==1){return either.apply(this,arguments[0])}return arguments[~~(Math.random()*arguments.length)]}function parameter(n){n=n||0;if(macros.display.parameters[n]){return macros.display.parameters[n]}return 0}function bookmark(){return state.hash||"#"}function internalEval(s){return eval("0,"+s)}function scriptEval(s){try{eval(s.text)}catch(e){alert("There is a technical problem with this "+tale.identity()+" ("+s.title+": "+e.message+")."+softErrorMessage)}}window.onbeforeunload=function(){if(tale&&tale.storysettings.lookup("exitprompt",false)&&state&&state.history.length>1){return"You are about to end this "+tale.identity()+"."}};var oldOnError=window.onerror||null,softErrorMessage="You may be able to continue playing, but some parts may not work properly.";window.onerror=function(msg,a,b,c,error){var s=(error&&(".\n\n"+error.stack.replace(/\([^\)]+\)/g,"")+"\n\n"))||(" ("+msg+").\n");alert("Sorry to interrupt, but this "+((tale&&tale.identity&&tale.identity())||"page")+"'s code has got itself in a mess"+s+softErrorMessage.slice(1));window.onerror=oldOnError;if(typeof window.onerror=="function"){window.onerror(msg,a,b,c,error)}};var $;function main(){$=window.$||function(a){return(typeof a=="string"?document.getElementById(a):a)
};var imgs,scripts,macro,style,i,styleText="",passages=document.getElementById("passages");function sanityCheck(thing){var i,j,s="NOTE: The "+thing,checks={prerender:prerender,postrender:postrender,macros:macros};for(i in checks){if(Object.prototype.hasOwnProperty.call(checks,i)&&!sanityCheck[i]){if(!checks[i]||typeof checks[i]!="object"){alert(s+" seems to have corrupted the "+i+" object."+softErrorMessage);sanityCheck[i]=true;continue}if(i!="macros"){for(j in checks[i]){if(Object.prototype.hasOwnProperty.call(checks[i],j)&&typeof checks[i][j]!="function"){alert(s+" added a property '"+j+"' to "+i+", "+"which is a "+typeof checks[i][j]+", not a function."+softErrorMessage);sanityCheck[i]=true;break}}}}}if(!sanityCheck.display){if(History.prototype.display.length<4&&!~History.prototype.display.toString().indexOf("arguments")){alert(s+" contains a function that patches History.prototype.display, but takes the wrong number of arguments."+softErrorMessage)}sanityCheck.display=true}}if(!window.JSON||!document.querySelector){return(passages.innerHTML="This "+tale.identity()+" requires a newer web browser. Sorry.")}else{passages.innerHTML=""}tale=window.tale=new Tale();if(~document.documentElement.className.indexOf("lt-ie9")){imgs=tale.lookup("tags","Twine.image");for(i=0;i<imgs.length;i++){if(imgs[i].text.length>=32768){alert("NOTE: This "+tale.identity()+"'s HTML file contains embedded images that may be too large for this browser to display."+softErrorMessage);break}}}scripts=tale.lookup("tags","script");for(i=0;i<scripts.length;i++){scriptEval(scripts[i]);sanityCheck('script passage "'+scripts[i].title+'"')}state=window.state=new History();for(i in macros){macro=macros[i];if(typeof macro.init=="function"){macro.init();sanityCheck('init() of the custom macro "'+i+'"')}}style=document.getElementById("storyCSS");for(i in tale.passages){i=tale.passages[i];if(i.tags.indexOf("stylesheet")==-1){continue
}if(i.tags+""=="stylesheet"){styleText+=i.text}else{if(i.tags.length==2&&i.tags.indexOf("transition")>-1){setTransitionCSS(i.text)}}}styleText=alterCSS(styleText);style.styleSheet?(style.styleSheet.cssText=styleText):(style.innerHTML=styleText);state.init()}setTimeout(function f(){var size,bar=document.getElementById("loadingbar"),store=document.getElementById("storeArea");if(!bar){return
}if(store){size=store.getAttribute("data-size");if(store.children.length<=size&&!tale){bar.style.width=~~((store.children.length+1)/size*100)+"%"}else{bar.outerHTML="";return}}setTimeout(f,5)},5);

var hasPushState=!!window.history&&(typeof window.history.pushState=="function")&&(function(a){try{a.setItem("test","1");a.removeItem("test");return true}catch(e){return false
}}(window.sessionStorage));Tale.prototype.canBookmark=function(){return this.canUndo()&&!this.storysettings.lookup("hash")&&(this.storysettings.lookup("bookmark",true)||!hasPushState)};History.prototype.init=function(){var a=this;if(!this.restore()){if(tale.has("StoryInit")){new Wikifier(insertElement(null,"span"),tale.get("StoryInit").text)}this.display("Start",null)}if(!hasPushState){this.hash=window.location.hash;this.interval=window.setInterval(function(){a.watchHash()},250)}};hasPushState&&(History.prototype.pushState=function(replace,uri){window.history[replace?"replaceState":"pushState"]({id:this.id,length:this.history.length},document.title,uri)});History.prototype.display=function(title,source,type,callback){var i,e,q,bookmark,hash,c=tale.get(title),p=document.getElementById("passages");if(c==null){return
}if(type!="back"){this.saveVariables(c,source,callback);hash=(tale.storysettings.lookup("hash")&&this.save())||"";if(hasPushState&&tale.canUndo()){try{sessionStorage.setItem("Twine.History"+this.id,JSON.stringify(decompile(this.history)));this.pushState(this.history.length<=2&&window.history.state=="",hash)}catch(e){alert("Your browser couldn't save the state of the "+tale.identity()+".\n"+"You may continue playing, but it will no longer be possible to undo moves from here on in.");tale.storysettings.undo="off"}}}this.hash=hash||this.save();e=c.render();if(type!="quietly"){if(hasTransition){for(i=0;i<p.childNodes.length;i+=1){q=p.childNodes[i];q.classList.add("transition-out");setTimeout((function(a){return function(){if(a.parentNode){a.parentNode.removeChild(a)}}}(q)),1000)}e.classList.add("transition-in");setTimeout(function(){e.classList.remove("transition-in")},1);e.style.visibility="visible";p.appendChild(e)}else{removeChildren(p);p.appendChild(e);fade(e,{fade:"in"
})}}else{p.appendChild(e);e.style.visibility="visible"}tale.setPageElements();if(tale.canUndo()){if(!hasPushState&&type!="back"){window.location.hash=this.hash}else{if(tale.canBookmark()){bookmark=document.getElementById("bookmark");bookmark&&(bookmark.href=this.hash)}}}window.scroll(0,0);return e};History.prototype.watchHash=function(){if(window.location.hash!=this.hash){if(window.location.hash&&(window.location.hash!="#")){this.history=[{passage:null,variables:{}}];removeChildren(document.getElementById("passages"));if(!this.restore()){alert("The passage you had previously visited could not be found.")}}else{window.location.reload()}this.hash=window.location.hash}};History.prototype.loadLinkVars=function(){for(var c in this.history[0].linkVars){this.history[0].variables[c]=clone(this.history[0].linkVars[c])}};Passage.prototype.render=function(){var b=insertElement(null,"div","passage"+this.title,"passage");b.style.visibility="hidden";this.setTags(b);this.setCSS();insertElement(b,"div","","header");var a=insertElement(b,"div","","body content");for(var i in prerender){(typeof prerender[i]=="function")&&prerender[i].call(this,a)}new Wikifier(a,this.processText());insertElement(b,"div","","footer");for(i in postrender){(typeof postrender[i]=="function")&&postrender[i].call(this,a)}return b};Passage.prototype.excerpt=function(){var b=this.text.replace(/<<.*?>>/g,"");b=b.replace(/!.*?\n/g,"");b=b.replace(/[\[\]\/]/g,"");var a=b.split("\n");while(a.length&&a[0].length==0){a.shift()}var c="";if(a.length==0||a[0].length==0){c=this.title}else{c=a[0].substr(0,30)+"..."}return c};Passage.transitionCache="";Passage.prototype.setCSS=function(){var trans=false,text="",tags=this.tags||[],c=document.getElementById("tagCSS"),c2=document.getElementById("transitionCSS");if(c&&c.getAttribute("data-tags")!=tags.join(" ")){tale.forEachStylesheet(tags,function(passage){if(~passage.tags.indexOf("transition")){if(!Passage.transitionCache&&c2){Passage.transitionCache=c2.innerHTML}setTransitionCSS(passage.text);trans=true}else{text+=alterCSS(passage.text)}});if(!trans&&Passage.transitionCache&&c2){setTransitionCSS(Passage.transitionCache);trans=false;Passage.transitionCache=""}c.styleSheet?(c.styleSheet.cssText=text):(c.innerHTML=text);c.setAttribute("data-tags",tags.join(" "))}};var Interface={init:function(){var snapback=document.getElementById("snapback"),restart=document.getElementById("restart"),bookmark=document.getElementById("bookmark");main();if(!tale){return
}if(snapback){if(!tale.lookup("tags","bookmark").length){snapback.parentNode.removeChild(snapback)}else{addClickHandler(snapback,Interface.showSnapback)}}if(bookmark&&(!tale.canBookmark()||!hasPushState)){bookmark.parentNode.removeChild(bookmark)}restart&&addClickHandler(restart,Interface.restart)},restart:function(){if(confirm("Are you sure you want to restart this "+tale.identity()+"?")){state.restart()}},showSnapback:function(a){Interface.hideAllMenus();Interface.buildSnapback();Interface.showMenu(a,document.getElementById("snapbackMenu"))},buildSnapback:function(){var b,c=false,menuelem=document.getElementById("snapbackMenu");while(menuelem.hasChildNodes()){menuelem.removeChild(menuelem.firstChild)}for(var a=state.history.length-1;a>=0;a--){if(state.history[a].passage&&state.history[a].passage.tags.indexOf("bookmark")!=-1){b=document.createElement("div");b.pos=a;addClickHandler(b,function(){return macros.back.onclick(true,this.pos)});b.innerHTML=state.history[a].passage.excerpt();menuelem.appendChild(b);c=true}}b=null;if(!c){b=document.createElement("div");b.innerHTML="<i>No passages available</i>";document.getElementById("snapbackMenu").appendChild(b)}},hideAllMenus:function(){document.getElementById("snapbackMenu").style.display="none"},showMenu:function(b,a){if(!b){b=window.event}var c={x:0,y:0};if(b.pageX||b.pageY){c.x=b.pageX;c.y=b.pageY}else{if(b.clientX||b.clientY){c.x=b.clientX+document.body.scrollLeft+document.documentElement.scrollLeft;c.y=b.clientY+document.body.scrollTop+document.documentElement.scrollTop}}a.style.top=c.y+"px";a.style.left=c.x+"px";a.style.display="block";addClickHandler(document,Interface.hideAllMenus);b.cancelBubble=true;if(b.stopPropagation){b.stopPropagation()}}};window.onload=Interface.init;macros.back.onclick=function(back,steps){var title;if(back){if(tale.canUndo()){window.history.go(-steps);return}while(steps-->=0&&state.history.length>1){title=state.history[0].passage.title;state.history.shift()}state.loadLinkVars();state.saveVariables(tale.get(title));state.display(title,null,"back")}else{state.display(state.history[steps].passage.title)}};window.onpopstate=function(e){var title,hist,steps,i,s=e&&e.state;if(s&&s.id&&s.length!=null){hist=recompile(JSON.parse(sessionStorage.getItem("Twine.History"+s.id)));if(hist){steps=hist.length-s.length}}if(steps!=null){state.history=hist;while(steps-->=0&&state.history.length>1){title=state.history[0].passage.title;state.history.shift()}state.loadLinkVars();state.saveVariables(tale.get(title));state.display(title,null,"back")}};

testplay = "";

}());
</script>
<script title="modules">


</script>
<style id="baseCSS">
/* Sidebar */
#sidebar {
	position: fixed;
	list-style: none;
	width: 12em;
}
#sidebar #title, #sidebar #credits  {
	cursor: auto;
}
#sidebar #storySubtitle, #sidebar #storyMenu {
	display: block;
}
.menu {
	position: absolute;
	display: none;
	z-index: 5;
}
/* Passages container */
#passages {
	margin-left: 18.2em;
	position:relative;
}
/* Links */
.passage a {
	color: #4d6ad8;
}
a.internalLink, a.externalLink, a.back, a.return, [data-passage], .menu div {
	cursor: pointer;
}
a.brokenLink {
	background-color: red;
	color: #000;
}
.marked {
	background-color: #f66;
	color: #000;
}
.marked[title] {
	cursor: help;
}
.passage li[data-bullet] {
	list-style-type: none;
}
.passage li[data-bullet]:before {
	content: attr(data-bullet);
	position: relative;
	left: -1em;
}
#storeArea {
	display: none;
}
#noscript {
	margin-left: 18.2em;
	font-size: 1.2em;
	font-weight: bold;
}
/* HTML4 compatibility */
img {
	vertical-align:bottom;
}
@media screen and (max-width: 640px) {
	#sidebar {
		position: static;
		margin: 0 auto;
		padding: 0;
	}
	body #sidebar li  {
		text-align: center;
	}
	#passages {
		min-height: 100vh;
		margin-left: 0em;
	}
}
#loadingbar {
	position:fixed;
	top:0;
	left:0;
	border-top: solid #4d6ad8 6px;
	transition: width 0.5s;
}
</style>
<style id="defaultCSS">
body {
	background-color: #000;
	color: #fff;
	font-family: Verdana,sans-serif;
	font-size: 62.5%;
	margin: 4em 15% 5% 5em;
}
#sidebar {
	left: 7.5em;
	margin: 0;
	padding: 0 1em 0 0;
	font: bold 1.1em Verdana,sans-serif;
}
#sidebar ul {
	padding: 0;
}
#sidebar li {
	color: #333;
	text-align: right;
	background-repeat: no-repeat;
	margin-bottom: 1em;
	line-height: 1.4em;
	list-style: none;
}
#sidebar li a {
	color: #333;
	text-decoration: none;
}
#sidebar li a:hover, #sidebar #title a:hover, #snapback:hover, #restart:hover {
	color: #fff;
	cursor: pointer;
	text-decoration: none;
}
#sidebar #title {
	font-size: 150%;
}
#sidebar #title, #sidebar #title:hover, #sidebar #title a {
	color: #999;
}
#sidebar #storySubtitle {
	font-size: 75%;
}
#storyAuthor {
	font-size: 50%;
}
#sidebar #storyMenu {
	line-height: 2.5em;
	margin-bottom: .5em;
	color: #999;
	cursor: auto;
}
#sidebar #credits {
	padding-top: 2em;
	font-weight: normal;
	font-size: 80%;
}
#sidebar #credits:hover {
	color: #333;
}
#sidebar #credits a {
	text-decoration: none;
}
#passages {
	border-left: 1px solid #333;
	padding-left: 1.5em;
}
.menu {
	background-color: #343434;
	color: #fff;
	opacity: .9;
	border: 1px solid #fff;
	text-align: left;
	font: 1.1em Verdana;
	line-height: 2em;
}
.menu div {
	padding: 0 .4em;
}
.menu div:hover {
	cursor: pointer;
	background-color: #fff;
	color: #343434;
}
.passage {
	font-size: 1.2em;
	line-height: 175%;
	margin-bottom: 2em;
	text-align: left;
}
.passage a {
	font-weight: bold;
	text-decoration: none;
}
.passage a:hover {
	color: #8ea6ff;
	text-decoration: underline;
}
.content > ul {
	padding-top: 1.3em;
}
.passage ul, .passage ol {
	margin-left: .5em;
	padding-left: 1.5em;
}
.passage li {
	margin-right: 6em;
}
.passage table {
	border-collapse: collapse;
	font-size: 100%;
	margin: .8em 1.0em;
}
.passage th,.passage td,.passage tr,.passage caption {
	padding: 3px;
}
.passage hr {
	height: 1px;
}
.passage center {
	max-width:50%;
	margin:auto;
}
.marked {
	margin-right: 12px;
	padding: 3px;
}
.disabled {
	font-weight: bold;
	color: #333;
}
@media screen and (max-width: 640px) {
	body {
		margin: 5%;
	}
	#sidebar {
		width:100%;
		margin: 0;
		border-bottom: 1px solid #333;
	}
	#passages {
		padding-top: 2em;
		border-left: 0;
	}
}
</style>
<style id="transitionCSS">
.transition-in {
	opacity:0;
	position:absolute;
}
.passage:not(.transition-out) {
	transition: 1s;
	-webkit-transition: 1s;
}
.transition-out {
	opacity:0 !important;
	position:absolute;
}
</style>
<style id="storyCSS"></style>
<style id="tagCSS"></style>
</head>
<body>
<div id="loadingbar"></div>
<ul id="sidebar">
<li id="title" class="storyElement"><span id="storyTitle" class="storyElement"></span><span id="storySubtitle" class="storyElement"></span><span id="titleSeparator"></span><span id="storyAuthor" class="storyElement"></span></li>
<li id="storyMenu" class="storyElement" style="display:none"></li>
<li><a href="javascript:;" id="snapback">Rewind</a></li>
<li><a href="javascript:;" id="restart">Restart</a></li>
<li><a id="bookmark" title="Permanent link to this passage">Bookmark</a></li>
<li id="credits">
This story was created with <a href="http://twinery.org/">Twine</a> and is powered by <a href="http://tiddlywiki.com/">TiddlyWiki</a>
</li>
</ul>
<div id="snapbackMenu" class="menu"></div>
<div id="passages">
<noscript><div id="noscript">Please enable Javascript to play this story!</div></noscript>
<style>
#sidebar{display:none;}
</style>
</div>
<div id="storeArea" data-size="58" hidden><div tiddler="Final Encounter-2-1" tags="" created="201503281619" modifier="twee" twine-position="33,1102">&lt;&lt;getvalue $aliveT $traitor &quot;alive&quot;&gt;&gt;&lt;&lt;if $aliveT&gt;&gt;Suddenly you hear a cold, dark voice. It’s coming from &lt;&lt;printname $traitor&gt;&gt;! “Yes, &lt;&lt;print $name&gt;&gt;, you were correct to be suspicious… but it looks like you’ve gone after one of your own. I’ll admit it, you got close. But it was your own hubris that obscured your judgment. You and your cohorts will pay dearly for this.” You feel an intense rumbling as the cave closes in on itself, leaving the four of you in complete darkness. This will be your last adventure.&lt;&lt;else&gt;&gt;Your group is able to claim the treasure with ease. After all your hardships you and your group are finally able to claim your reward. Though everyone is celebrating, there is also a moment of silence for &lt;&lt;printname $traitor&gt;&gt;. The journey could not have been made without loss. The rest of your team lives to fight another day.&lt;&lt;endif&gt;&gt;</div><div tiddler="Sudden Encounter-4-2" tags="" created="201503281328" modifier="twee" twine-position="1839,310">&lt;&lt;getvalue $actorWit $actor &quot;wit&quot;&gt;&gt;&lt;&lt;if $actorWit is 25&gt;&gt;You are about to pin him down when you hear a faint, cracked voice. “Please… I need it for my - for my dog. Yeah! I need this gold for my dog!” Your party exchanges looks of bewilderment. You share the same feeling. \n\n“What did you say?”\nX replies, “Look, my dog was feeling a bit sick. I thought a bit of gold would cheer him up!”\nYou hear someone whispering in your group: “I didn’t even know he had a dog…”\n\nYou silently agree. He’s obviously lying. You demand, “Look, we forgive you, no hard feelings. In fact, I’ll even let you hold on to all that gold -” X’s face beams with excitement. “BUT we’ll split the other loot amongst ourselves until we have as much as you. Deal?” X is too busy staring at his bounty to listen to you. His loss.&lt;&lt;else if $actorWit is 50&gt;&gt;You are about to pin him down when he calmly says, “I don’t know what got hold of me. Here, take the loot.” That’s a bit weird - you were expecting him to weasel his way out somehow. It looks like he didn’t trust his own cleverness.&lt;&lt;else if $actorWit is 75&gt;&gt;You are about to pin him down when suddenly he yells, “Shut up, shut up! Can’t you see? This necklace is cursed! You can tell because of the pixels.”\n\n“Pixels?”, you ask.\n\n“Yes! If you would just look closely, you would see that this necklace is made up of millions of tiny squares - pixels, if you will - unlike any mineral I’ve ever seen. It’s very clearly manufactured and very clearly cursed. You know what? I’m going to keep it with me for research, and I suggest you don’t interrupt me anymore.”\n\nYou aren’t exactly an expert in this sort of unholy witchcraft, and now is not the time to learn it. You allow X to keep the necklace and you take your meager coins.&lt;&lt;endif&gt;&gt;\n\n&lt;&lt;nextscene $scene&gt;&gt;&lt;&lt;print &quot;[[Next|&quot; + $scene + &quot;]]&quot;&gt;&gt;</div><div tiddler="Sudden Encounter-4-3" tags="" created="201503281325" modifier="twee" twine-position="1839,162">You decide not to confront him about his stolen loot, despite how obvious it is. &lt;&lt;if $actorGreed is 25&gt;&gt;You find it strange since &lt;&lt;printname $actor&gt;&gt; is usually not the greedy type. &lt;&lt;endif&gt;&gt;The other members of your group take offense to this. “You’re not going to say anything?! That’s my money! If you won’t, I will!” says one as he starts walking up to &lt;&lt;printname $actor&gt;&gt;. “Stop. We need to keep our sanity for this mission, and &lt;&lt;printname $actor&gt;&gt;’s is very clearly eroding. There’s nothing to gain from provoking him. We’ll be more careful with our next chest, but for now it’s best to ignore him.” Though furious before, your group nods in agreement. Your reasoning has prevented unnecessary conflict. The party moves on.\n\n&lt;&lt;nextscene $scene&gt;&gt;&lt;&lt;print &quot;[[Next|&quot; + $scene + &quot;]]&quot;&gt;&gt;\n</div><div tiddler="Sudden Encounter-4-1" tags="" created="201503281325" modifier="twee" twine-position="1669,316">You walk over to &lt;&lt;printname $actor&gt;&gt;, who is huddled in a corner with a handful of jewels clearly in his lap. “Hand it over. You know the deal we have, and it is certainly not this.” No response. “&lt;&lt;printname $actor&gt;&gt;, split the wealth or I will do it personally!” He refuses to make eye contact, much less speak. It’s as if he can’t even afford to give his attention to you. Greedy bastard.\n\n[[Next|Sudden Encounter-4-2]]</div><div tiddler="Final Encounter-1-1" tags="" created="201503281619" modifier="twee" twine-position="141,881">&lt;&lt;if $traitor is 0&gt;&gt;Of course it’s &lt;&lt;print $mem0&gt;&gt;. He’s been acting completely unlike himself, and it’s time to point him out on it before does anything worse. You see him stuffing some gold coins into his sack a few rooms down and decide to confront him. “&lt;&lt;print $mem0&gt;&gt;, I know who you are, and that disguise of yours might fool them but it won’t fool me.” The rest of your group, hearing the exchange, gathers around the both of you. &lt;&lt;print $mem0&gt;&gt; just stares at you with a confused look. You grab him by his shoulders. “Don’t play dumb with me! Who are you, really!?”\n\n[[Next|Final Encounter-1-6]]&lt;&lt;else&gt;&gt;Of course it’s &lt;&lt;print $mem0&gt;&gt;. He’s been acting completely unlike himself, and it’s time to point him out on it before does anything worse. You see him stuffing some gold coins into his sack a few rooms down and decide to confront him. “&lt;&lt;print $mem0&gt;&gt;, I know who you are, and that disguise of yours might fool them but it won’t fool me.” The rest of your group, hearing the exchange, gathers around the both of you. &lt;&lt;print $mem0&gt;&gt; just stares at you with a confused look. You grab him by his shoulders. “Don’t play dumb with me! Who are you, really!?”\n\nYou start to shake him violently until the other party members restrain you. “I am &lt;&lt;print $mem0&gt;&gt;! What are you talking about?” Everyone is looking at you with bewilderment. You realize you’ve might have been wrong.\n[[Next|Final Encounter-1-7]]&lt;&lt;endif&gt;&gt;</div><div tiddler="Final Encounter-1-3" tags="" created="201503281619" modifier="twee" twine-position="481,894">&lt;&lt;if $traitor is 2&gt;&gt;Of course it’s &lt;&lt;print $mem2&gt;&gt;. He’s been acting completely unlike himself, and it’s time to point him out on it before does anything worse. You see him stuffing some gold coins into his sack a few rooms down and decide to confront him. “&lt;&lt;print $mem2&gt;&gt;, I know who you are, and that disguise of yours might fool them but it won’t fool me.” The rest of your group, hearing the exchange, gathers around the both of you. &lt;&lt;print $mem2&gt;&gt; just stares at you with a confused look. You grab him by his shoulders. “Don’t play dumb with me! Who are you, really!?”\n\n[[Next|Final Encounter-1-6]]&lt;&lt;else&gt;&gt;Of course it’s &lt;&lt;print $mem2&gt;&gt;. He’s been acting completely unlike himself, and it’s time to point him out on it before does anything worse. You see him stuffing some gold coins into his sack a few rooms down and decide to confront him. “&lt;&lt;print $mem2&gt;&gt;, I know who you are, and that disguise of yours might fool them but it won’t fool me.” The rest of your group, hearing the exchange, gathers around the both of you. &lt;&lt;print $mem2&gt;&gt; just stares at you with a confused look. You grab him by his shoulders. “Don’t play dumb with me! Who are you, really!?”\n\nYou start to shake him violently until the other party members restrain you. “I am &lt;&lt;print $mem2&gt;&gt;! What are you talking about?” Everyone is looking at you with bewilderment. You realize you’ve might have been wrong.\n\n[[Next|Final Encounter-1-7]]&lt;&lt;endif&gt;&gt;</div><div tiddler="Running in Circles" tags="" created="201503280105" modifier="twee" twine-position="201,417">&lt;&lt;resetactors&gt;&gt;&lt;&lt;nextactor $actor &quot;experience&quot; false&gt;&gt;After a few hours of exploration the team finds itself at a fork in the cave. &lt;&lt;if not($actor is -1)&gt;&gt;&lt;&lt;printname $actor&gt;&gt; takes it upon himself to closely examine each entrance. He decides that the group needs to take the left path. You’re a bit doubtful. “I’ve been on the team for how many years now? Six? Seven? How could you possibly not trust me? I say we should go left, and mark my words, I will be correct.”&lt;&lt;else&gt;&gt;No one seems to know where to go. It's up to you to make the decision.&lt;&lt;endif&gt;&gt;\n\n[[Go left|Running in Circles-1-1]]\n[[Go right|Running in Circles-2-1]]</div><div tiddler="Final Encounter-1-4" tags="" created="201503281619" modifier="twee" twine-position="668,883">&lt;&lt;if $traitor is 3&gt;&gt;Of course it’s &lt;&lt;print $mem3&gt;&gt;. He’s been acting completely unlike himself, and it’s time to point him out on it before does anything worse. You see him stuffing some gold coins into his sack a few rooms down and decide to confront him. “&lt;&lt;print $mem3&gt;&gt;, I know who you are, and that disguise of yours might fool them but it won’t fool me.” The rest of your group, hearing the exchange, gathers around the both of you. &lt;&lt;print $mem3&gt;&gt; just stares at you with a confused look. You grab him by his shoulders. “Don’t play dumb with me! Who are you, really!?”\n\n[[Next|Final Encounter-1-6]]&lt;&lt;else&gt;&gt;Of course it’s &lt;&lt;print $mem3&gt;&gt;. He’s been acting completely unlike himself, and it’s time to point him out on it before does anything worse. You see him stuffing some gold coins into his sack a few rooms down and decide to confront him. “&lt;&lt;print $mem3&gt;&gt;, I know who you are, and that disguise of yours might fool them but it won’t fool me.” The rest of your group, hearing the exchange, gathers around the both of you. &lt;&lt;print $mem3&gt;&gt; just stares at you with a confused look. You grab him by his shoulders. “Don’t play dumb with me! Who are you, really!?”\n\nYou start to shake him violently until the other party members restrain you. “I am &lt;&lt;print $mem3&gt;&gt;! What are you talking about?” Everyone is looking at you with bewilderment. You realize you’ve might have been wrong.\n\n[[Next|Final Encounter-1-7]]&lt;&lt;endif&gt;&gt;</div><div tiddler="Final Encounter-1-7" tags="" created="201503281629" modifier="twee" twine-position="577,1100">A few seconds pass. \n“I’ve known you for years! How could you say something like that to me? Have all of those countless adventures meant nothing to you!?”. \n“Yeah, he’s been getting a bit loopy, hasn’t he?” says one party member. \n“You’re right. Maybe it is time for a new leader,” says another. \nYou’re shocked. Could you really have been wrong? Was it just bad luck? Regardless, you’ve no doubt sullied your reputation with this outburst. You remain quiet to prevent any more embarrassment and go back to collecting your loot. Only time can heal this wound now.</div><div tiddler="Final Encounter-1-6" tags="" created="201503281629" modifier="twee" twine-position="314,1092">&lt;&lt;printname $traitor&gt;&gt; speaks. Or, more accurately, &lt;&lt;printname $traitor&gt;&gt;’s possessor speaks. In a cold, booming voice, it says, “It looks like you’ve caught me, &lt;&lt;print $name&gt;&gt;. Your intuition is truly superhuman. Not that it matters, however, as I’m afraid tha - “ You stab &lt;&lt;printname $traitor&gt;&gt; in the heart. Thank the gods that demons love to monologue. After mourning the loss of &lt;&lt;printname $traitor&gt;&gt; for a bit, the party returns to their loot collecting. Though his death is a tragedy, there is also the mutual knowledge that you prevented the surefire deaths of everybody else. Your team will live to fight another day.</div><div tiddler="Final Encounter" tags="" created="201503280107" modifier="twee" twine-position="40,717">&lt;&lt;silently&gt;&gt;\n&lt;&lt;getvalue $mem0 0 &quot;name&quot;&gt;&gt;\n&lt;&lt;getvalue $alive0 0 &quot;alive&quot;&gt;&gt;\n&lt;&lt;getvalue $mem1 1 &quot;name&quot;&gt;&gt;\n&lt;&lt;getvalue $alive1 1 &quot;alive&quot;&gt;&gt;\n&lt;&lt;getvalue $mem2 2 &quot;name&quot;&gt;&gt;\n&lt;&lt;getvalue $alive2 2 &quot;alive&quot;&gt;&gt;\n&lt;&lt;getvalue $mem3 3 &quot;name&quot;&gt;&gt;\n&lt;&lt;getvalue $alive3 3 &quot;alive&quot;&gt;&gt;\n&lt;&lt;endsilently&gt;&gt;You’ve gone through every nook and cranny of the cave and are starting to prepare all of the loot for transport. You and your team can barely move, however. It’s clear there’s been many more mishaps than any other adventure you’ve had. Perhaps there’s something going on… No, there must be something wrong. One of your team members hasn’t been acting like himself lately, and you’ve known each of them for a long time. If you need to take action, now’s the time to do it.\n\n&lt;&lt;if $alive0&gt;&gt;&lt;&lt;print &quot;[[Accuse &quot; + $mem0 + &quot;|Final Encounter-1-1]]&quot;&gt;&gt;&lt;br&gt;&lt;&lt;endif&gt;&gt;&lt;&lt;if $alive1&gt;&gt;&lt;&lt;print &quot;[[Accuse &quot; + $mem1 + &quot;|Final Encounter-1-2]]&quot;&gt;&gt;&lt;br&gt;&lt;&lt;endif&gt;&gt;&lt;&lt;if $alive2&gt;&gt;&lt;&lt;print &quot;[[Accuse &quot; + $mem2 + &quot;|Final Encounter-1-3]]&quot;&gt;&gt;&lt;br&gt;&lt;&lt;endif&gt;&gt;&lt;&lt;if $alive3&gt;&gt;&lt;&lt;print &quot;[[Accuse &quot; + $mem3 + &quot;|Final Encounter-1-4]]&quot;&gt;&gt;&lt;br&gt;&lt;&lt;endif&gt;&gt;[[Accuse no one|Final Encounter-2-1]]</div><div tiddler="Start" tags="" created="201503272209" modifier="twee" twine-position="11,9">&lt;&lt;set $introsound to &quot;./intro.wav&quot;&gt;&gt;&lt;&lt;set $cavesound to &quot;./cave.wav&quot;&gt;&gt;&lt;&lt;loopsound $introsound&gt;&gt;&lt;strong&gt;Aesop's Cave&lt;/strong&gt;\nBy Kevin Sun and Matthewit Dechatech\n\nPlease enter your name.\n&lt;&lt;textinput $name \n[[Start my adventure!|Beggining]]&gt;&gt;</div><div tiddler="Sudden Encounter" tags="" created="201503280100" modifier="twee" twine-position="211,148">&lt;&lt;resetactors&gt;&gt;Deep into the cave you find yourself surrounded by an army of skeletons. Nothing you haven’t beaten before. It is led, however, by a truly horrendous mass of bone and flesh. On its left hand is a large bone, sharpened into an unholy looking scimitar. On its right - well, it has no right hand. A foul stench hits your team as it approaches, knocking hundreds of skeletons out of its way. This is going to be a tough battle.\n\n[[Fight!!|Sudden Encounter-1]]</div><div tiddler="Sudden Encounter-2-4" tags="" created="201503281254" modifier="twee" twine-position="911,324">&lt;&lt;getvalue $actorExp $actor &quot;experience&quot;&gt;&gt;&lt;&lt;if $actorExp is 25&gt;&gt;It’s harsh, but it works. He gets up. “Alright, let’s do it.” &lt;&lt;printname $actor&gt;&gt; and the rest of the team distract the monster, exploiting the monster’s shambling gait, while you head in for a direct hit. Suddenly the abomination swings at you. The sharp blade barely misses. It looks like &lt;&lt;printname $actor&gt;&gt; has tripped. The monster must have lost interest. While the creature struggles to pull its blade back up, you finish it off in one clean slice. Not exactly according to plan, but it works. You’ll have to push extra training on him after this.\n&lt;&lt;else if $actorExp is 50&gt;&gt;It’s harsh, but it works. He gets up. “Alright, let’s do it.” &lt;&lt;printname $actor&gt;&gt; and the rest of the team distract the monster, exploiting the monster’s shambling gait, while you head in for a direct hit. It all goes according to plan. &lt;&lt;printname $actor&gt;&gt; might have lost his composure for a bit, but he’s still been in enough fights to know what he’s doing.&lt;&lt;else if $actorExp is 75&gt;&gt;&lt;&lt;printname $actor&gt;&gt; chuckles to himself. “What are you talking about? I’ve fought monsters twice this size! I was just checking my watch.” It’s strange in such a dire situation, but you can’t help but laugh with him. He gets up. You and &lt;&lt;printname $actor&gt;&gt; distract the monster, exploiting its shambling gait. You can’t help but notice &lt;&lt;printname $actor&gt;&gt;’s confident expression as he flawlessly encircles the huge creature. The rest of the team goes in for the killing blow. Your party is too exhausted to celebrate.&lt;&lt;endif&gt;&gt;\n\n[[Next|Sudden Encounter-3]]</div><div tiddler="A Heart to Heart Discussion-2-1" tags="" created="201503281547" modifier="twee" twine-position="846,456">You grab him by the shoulder. “Don’t be a fool. You can’t trust such an insidious being,” you say. I’d rather have us die fighting it than allow you to surrender to its fate. X is touched. “You’re right,” he says. The party braces for the specter’s wrath, when X finds an overhead projector hidden on the ceiling of the cave. He shoots it with his bow and the ghost vanishes. Well, that was easy.\n\n&lt;&lt;nextscene $scene&gt;&gt;&lt;&lt;print &quot;[[Next|&quot; + $scene + &quot;]]&quot;&gt;&gt;</div><div tiddler="Sudden Encounter-2-1" tags="" created="201503281253" modifier="twee" twine-position="726,323">You command your team to make a tactical retreat as you rush over to &lt;&lt;printname $actor&gt;&gt;. The abomination pursues, but at a cripple’s pace. You say, “&lt;&lt;printname $actor&gt;&gt;, we can either cower like infants and wait to be devoured by that beast, or we can face our fear right now and get out of this sooner. What will it be?”\n\n[[Next|Sudden Encounter-2-4]]</div><div tiddler="Sudden Encounter-2-2" tags="" created="201503281253" modifier="twee" twine-position="891,166">You attempt to perform your maneuvers without him, but it’s futile. No other member of the team is as agile as he is, and in the end the fiend manages to crush you one by one. &lt;&lt;printname $actor&gt;&gt; eventually does summon the bravery to help, but it’s too late. He is the last one to fall. Your party is dead.</div><div tiddler="scripts yay" tags="script" created="201503272209" modifier="twee" twine-position="6,428">var names = [\n{\n\tname: &quot;Don Quixote&quot;,\n\tused: false\n},\n{\n\tname: &quot;King Arthur&quot;,\n\tused: false\n},\n{\n\tname: &quot;Ted Cruz&quot;,\n\tused: false\n},\n{\n\tname: &quot;Sir Lancelot&quot;,\n\tused: false\n},\n{\n\tname: &quot;Davy Crockett&quot;,\n\tused: false\n},\n{\n\tname: &quot;Gandhi&quot;,\n\tused: false\n},\n{\n\tname: &quot;Resident Sleeper&quot;,\n\tused: false\n},\n{\n\tname: &quot;Plato&quot;,\n\tused: false\n}\n];\n\nvar scenes = [\n{\n\tname: &quot;Sudden Encounter&quot;,\n\tencountered: false\n},\n{\n\tname: &quot;Out of Food&quot;,\n\tencountered: false\n},\n{\n\tname: &quot;Running in Circles&quot;,\n\tencountered: false\n}\n];\n\nvar bios = {\n\texperience: [&quot;He is a relative newcomer. He is not as battle-hardened as the rest of your partners and is more prone to making mistakes. &quot;,\n\t\t\t\t&quot;&quot;,\n\t\t\t\t&quot;He has been with you since the formation of the team. He has developed a tried-and-true sense of intuition. &quot;],\n\tmercy: [&quot;He is borderline sadist. He holds contempt for the weak and feels that life should be a prize worthy only of the greatest. &quot;,\n\t\t\t&quot;&quot;,\n\t\t\t&quot;He is magnanimous. He believes that all creatures of all races are naturally good and that all should have the chance to manifest this. &quot;],\n\tgreed: [&quot;He is benevolent. He is a well-to-do individual and is even willing to forego his cut for this adventure.&quot;,\n\t\t\t&quot;&quot;,\n\t\t\t&quot;He lusts for wealth. Prior to the expedition he shamelessly argued for an enormous share in the loot. &quot;],\n\tbravery: [&quot;He is a coward. He jumps at every twist and creak of a dungeon and has developed a reputation of running away from hard fights. &quot;,\n\t\t\t&quot;&quot;,\n\t\t\t&quot;He is courageous. He is a role model to the rest of your group as he is often the last to run away from a fight. &quot;],\n\twit: [&quot;He is a dumbass. Last expedition you were nearly scalded by a trap that he failed to avoid, his excuse being that it had offered free candy. &quot;,\n\t\t&quot;&quot;,\n\t\t&quot;He is crafty. You have managed to avoid many fights altogether because of his attention to alternate routes as well as his sharp wits. &quot;],\n\tparanoia: [&quot;He is laid back. He easily trusts others and believes in your ability to manage the inner politics of the team. &quot;,\n\t\t\t&quot;&quot;,\n\t\t\t&quot;He is paranoid. He believes that the creatures of the dark and his peers alike are out to get him. &quot;]\n};\n\nvar party = [\n{\n\tname: &quot;&quot;,\n\tbio: &quot;&quot;,\n\talive: true,\n\tacted: false,\n\texperience: 0,\n\tmercy: 0,\n\tgreed: 0,\n\tbravery: 0,\n\twit: 0,\n\tsuspicion: 0,\n\tparanoia: 0\n},\n{\n\tname: &quot;&quot;,\n\tbio: &quot;&quot;,\n\talive: true,\n\tacted: false,\n\texperience: 0,\n\tmercy: 0,\n\tgreed: 0,\n\tbravery: 0,\n\twit: 0,\n\tsuspicion: 0,\n\tparanoia: 0\n},\n{\n\tname: &quot;&quot;,\n\tbio: &quot;&quot;,\n\talive: true,\n\tacted: false,\n\texperience: 0,\n\tmercy: 0,\n\tgreed: 0,\n\tbravery: 0,\n\twit: 0,\n\tsuspicion: 0,\n\tparanoia: 0\n},\n{\n\tname: &quot;&quot;,\n\tbio: &quot;&quot;,\n\talive: true,\n\tacted: false,\n\texperience: 0,\n\tmercy: 0,\n\tgreed: 0,\n\tbravery: 0,\n\twit: 0,\n\tsuspicion: 0,\n\tparanoia: 0\n}\n];\n\nvar seed = 0;\nvar traitor = -1;\n\nfunction nextRand(){\n\tvar rand = Math.sin(seed++) * 10000;\n\treturn rand - Math.floor(rand);\n};\n\nfunction getVariable(arg){\n\treturn state.history[0].variables[arg.substring(1)];\n};\n\nfunction setVariable(arg, val){\n\tstate.history[0].variables[arg.substring(1)] = val;\n};\n\n//&lt;&lt;seedify $name&gt;&gt;\nmacros['seedify'] = {\n\thandler: function(place, macroName, params, parser) {\n\t\tvar name = getVariable(params[0]);\n\t\tseed = 0;\n\t\tfor (var i = 0; i &lt; name.length; i++){\n\t\t\tseed += name.charCodeAt(i);\n\t\t}\n\t\t//instantiate party members\n\t\tfor (var i = 0; i &lt; party.length; i++){\n\t\t\t//instantiate name\n\t\t\tvar randNameIndex = nextRand();\n\t\t\trandNameIndex = Math.floor(randNameIndex * names.length);\n\t\t\tvar nameObj = names[randNameIndex];\n\t\t\twhile (nameObj.used){\n\t\t\t\trandNameIndex++;\n\t\t\t\trandNameIndex %= names.length;\n\t\t\t\tnameObj = names[randNameIndex];\n\t\t\t}\n\t\t\tparty[i].name = nameObj.name;\n\t\t\tnameObj.used = true;\n\t\t\t\n\t\t\t//instantiate other stuff\n\t\t\tvar randall;\n\t\t\tvar bio = &quot;&quot;;\n\t\t\t\n\t\t\t//instantiate experience\n\t\t\trandall = Math.floor(nextRand() * 3);\n\t\t\tbio += bios.experience[randall]\n\t\t\trandall = (randall + 1) * 25;\n\t\t\tparty[i].experience = randall;\n\t\t\t\n\t\t\t//instantiate greed\n\t\t\trandall = Math.floor(nextRand() * 3);\n\t\t\tbio += bios.greed[randall]\n\t\t\trandall = (randall + 1) * 25;\n\t\t\tparty[i].greed = randall;\n\t\t\t\n\t\t\t//instantiate mercy\n\t\t\trandall = Math.floor(nextRand() * 3);\n\t\t\tbio += bios.mercy[randall]\n\t\t\trandall = (randall + 1) * 25;\n\t\t\tparty[i].mercy = randall;\n\t\t\t\n\t\t\t//instantiate bravery\n\t\t\trandall = Math.floor(nextRand() * 3);\n\t\t\tbio += bios.bravery[randall]\n\t\t\trandall = (randall + 1) * 25;\n\t\t\tparty[i].bravery = randall;\n\t\t\t\n\t\t\t//instantiate wit\n\t\t\trandall = Math.floor(nextRand() * 3);\n\t\t\tbio += bios.wit[randall]\n\t\t\trandall = (randall + 1) * 25;\n\t\t\tparty[i].wit = randall;\n\t\t\t\n\t\t\t//instantiate paranoia\n\t\t\trandall = Math.floor(nextRand() * 3);\n\t\t\tbio += bios.wit[randall]\n\t\t\trandall = (randall + 1) * 25;\n\t\t\tparty[i].paranoia = randall;\n\t\t\t\n\t\t\tparty[i].bio = bio;\n\t\t\t\n\t\t\tconsole.log(JSON.stringify(party[i]));\n\t\t}\n\t}\n};\t\n\n//&lt;nextscene $scene&gt;&gt;\nmacros['nextscene'] = {\n\thandler: function(place, macroname, params, parser) {\n\t\tvar randSceneIndex = nextRand();\n\t\trandSceneIndex = Math.floor(randSceneIndex * scenes.length);\n\t\tvar sceneObj = scenes[randSceneIndex];\n\t\tvar timesLooped = 0;\n\t\twhile (sceneObj.used &amp;&amp; timesLooped &lt; scenes.length){\n\t\t\ttimesLooped++;\n\t\t\trandSceneIndex++;\n\t\t\trandSceneIndex %= scenes.length;\n\t\t\tsceneObj = scenes[randSceneIndex];\n\t\t}\n\t\tif (sceneObj.used &amp;&amp; timesLooped &gt;= scenes.length){\n\t\t\tstate.history[0].variables[params[0].substring(1)] = &quot;Final Encounter&quot;;\n\t\t} else {\n\t\t\tsceneObj.used = true;\n\t\t\tstate.history[0].variables[params[0].substring(1)] = sceneObj.name;\n\t\t}\n\t}\n};\n\n//&lt;&lt;nextrand $dest [$low] $high&gt;&gt;\nmacros['nextrand'] = {\n\thandler: function(place, macroname, params, parser) {\n\t\tvar randall = nextRand();\n\t\tif (params[2]){\n\t\t\trandall *= params[2] - params[1];\n\t\t\trandall += params[1];\n\t\t} else {\n\t\t\trandall *= params[1];\n\t\t}\n\t\tsetVariable(params[0], Math.floor(randall));\n\t}\n};\n\n//&lt;&lt;resetactors&gt;&gt;\nmacros['resetactors'] = {\n\thandler: function(place, macroname, params, parser) {\n\t\tfor (var i = 0; i &lt; party.length; i++) {\n\t\t\tparty[i].acted = false;\n\t\t}\n\t}\n};\n\n//&lt;&lt;nextactor $dest $trait $low&gt;&gt;\nmacros['nextactor'] = {\n\thandler: function(place, macroname, params, parser) {\n\t\tvar i = 0;\n\t\tvar trait = params[1];\n\t\tvar low = params[2];\n\t\tfor (i = 0; i &lt; party.length; i++){\n\t\t\tif (party[i].acted) continue;\n\t\t\tvar isTraitor = traitor == i;\n\t\t\tvar traitCheck = party[i][trait];\n\t\t\tif (low){\n\t\t\t\tif (isTraitor &amp;&amp; traitCheck == 75) {\n\t\t\t\t\tbreak;\n\t\t\t\t} else if (!isTraitor &amp;&amp; traitCheck == 25) {\n\t\t\t\t\tbreak;\n\t\t\t\t}\n\t\t\t} else {\n\t\t\t\tif (isTraitor &amp;&amp; traitCheck == 25) {\n\t\t\t\t\tbreak;\n\t\t\t\t} else if (!isTraitor &amp;&amp; traitCheck == 75){\n\t\t\t\t\tbreak;\n\t\t\t\t}\n\t\t\t}\n\t\t}\n\t\tif (i == traitor) console.log(&quot;Up to no good...&quot;);\n\t\tif (i == party.length){\n\t\t\tconsole.log(&quot;Ayy lmao&quot;);\n\t\t\tsetVariable(params[0], -1);\n\t\t} else {\t\t\t\t\n\t\t\tconsole.log(party[i].name);\n\t\t\tparty[i].acted = true;\n\t\t\tsetVariable(params[0], i);\n\t\t}\n\t}\n};\n\n//&lt;&lt;nexttraitor [$dest]&gt;&gt;\nmacros['nexttraitor'] = {\n\thandler: function(place, macroName, params, parser) {\n\t\tvar rando = nextRand();\n\t\trando = Math.floor(rando * party.length);\n\t\twhile (!party[rando].alive){\n\t\t\trando++;\n\t\t\trando %= party.length;\n\t\t}\n\t\ttraitor = rando;\n\t\tif (params[0]) setVariable(params[0], traitor);\n\t}\n};\n\n//&lt;&lt;printname $partymember&gt;&gt;\nmacros['printname'] = {\n\thandler: function(place, macroName, params, parser) {\n\t\tvar name;\n\t\tvar paramscheck = &quot;&quot; + params[0];\n\t\tif (paramscheck.charAt(0) == &quot;$&quot;){\n\t\t\tvar arg = state.history[0].variables[params[0].substring(1)];\n\t\t\tname = party[arg][&quot;name&quot;];\n\t\t} else {\n\t\t\tname = party[params[0]][&quot;name&quot;];\n\t\t}\n\t\tinsertText(place, name);\n\t}\n};\n\n//&lt;&lt;printbio $index&gt;&gt;\nmacros['printbio'] = {\n\thandler: function(place, macroName, params, parser) {\n\t\tvar bio;\n\t\tvar paramscheck = &quot;&quot; + params[0];\n\t\tif (paramscheck.charAt(0) == &quot;$&quot;){\n\t\t\tvar arg = state.history[0].variables[params[0].substring(1)];\n\t\t\tbio = party[arg][&quot;bio&quot;];\n\t\t} else {\n\t\t\tbio = party[params[0]][&quot;bio&quot;];\n\t\t}\n\t\tinsertText(place, bio);\n\t}\n};\n\n//&lt;&lt;getvalue $destination $member $key&gt;&gt;\nmacros['getvalue'] = {\n\thandler: function(place, macroname, params, parser) {\n\t\tvar member;\n\t\tvar key;\n\t\tvar paramscheck = &quot;&quot; + params[1];\n\t\tif (paramscheck.charAt(0) == &quot;$&quot;){\n\t\t\tmember = getVariable(params[1]);\n\t\t} else {\n\t\t\tmember = params[1];\n\t\t}\n\t\tif (member == -1){\n\t\t\tsetVariable(params[0], -1);\n\t\t\treturn;\n\t\t}\n\t\tparamscheck = &quot;&quot; + params[2];\n\t\tif (paramscheck.charAt(0) == &quot;$&quot;){\n\t\t\tkey = getVariable(params[2]);\n\t\t} else {\n\t\t\tkey = params[2];\n\t\t}\n\t\tsetVariable(params[0], party[member][key]);\n\t}\n};\n\n//&lt;&lt;kill $member&gt;&gt;\nmacros['kill'] = {\n\thandler: function(place, macroname, params, parser) {\n\t\tvar i = getVariable(params[0]);\n\t\tparty[i].alive = false;\n\t}\n};\n\n//&lt;&lt;incsuspicion $source $dest&gt;&gt;\nmacros['incsuspicion'] = {\n\thandler: function(place, macroname, params, parser) {\n\t\tparty[params[1]].suspicion += party[params[0]].paranoia;\n\t}\n};\n\n//someone else's sound code\n(function () {\n  &quot;use strict&quot;;\n  version.extensions['soundMacros'] = {\n    major: 1,\n    minor: 1,\n    revision: 2\n  };\n  var p = macros['playsound'] = {\n    soundtracks: {},\n    handler: function (a, b, c, d) {\n      var loop = function (m) {\n          if (m.loop == undefined) {\n            m.loopfn = function () {\n              this.play();\n            };\n            m.addEventListener('ended', m.loopfn, 0);\n          } else m.loop = true;\n          m.play();\n          };\n      var s = eval(d.fullArgs());\n      if (s) {\n        s = s.toString();\n        var m = this.soundtracks[s.slice(0, s.lastIndexOf(&quot;.&quot;))];\n        if (m) {\n          if (b == &quot;playsound&quot;) {\n            m.play();\n          } else if (b == &quot;loopsound&quot;) {\n            loop(m);\n          } else if (b == &quot;pausesound&quot;) {\n            m.pause();\n          } else if (b == &quot;unloopsound&quot;) {\n            if (m.loop != undefined) {\n              m.loop = false;\n            } else if (m.loopfn) {\n              m.removeEventListener('ended', m.loopfn);\n              delete m.loopfn;\n            }\n          } else if (b == &quot;stopsound&quot;) {\n            m.pause();\n            m.currentTime = 0;\n          } else if (b == &quot;fadeoutsound&quot; || b == &quot;fadeinsound&quot;) {\n            if (m.interval) clearInterval(m.interval);\n            if (b == &quot;fadeinsound&quot;) {\n              if (m.currentTime&gt;0) return;\n              m.volume = 0;\n              loop(m);\n            } else {\n              if (!m.currentTime) return;\n              m.play();\n            }\n            var v = m.volume;\n            m.interval = setInterval(function () {\n              v = Math.min(1, Math.max(0, v + 0.005 * (b == &quot;fadeinsound&quot; ? 1 : -1)));\n              m.volume = Math.easeInOut(v);\n              if (v == 0 || v == 1) clearInterval(m.interval);\n              if (v == 0) {\n                m.pause();\n                m.currentTime = 0;\n                m.volume = 1;\n              }\n            }, 10);\n          }\n        }\n      }\n    }\n  }\n  macros['fadeinsound'] = p;\n  macros['fadeoutsound'] = p;\n  macros['unloopsound'] = p;\n  macros['loopsound'] = p;\n  macros['pausesound'] = p;\n  macros['stopsound'] = p;\n  macros['stopallsound'] = {\n    handler: function () {\n      var s = macros.playsound.soundtracks;\n      for (var j in s) {\n\t\tif (s.hasOwnProperty(j)) {\n          s[j].pause();\n          if (s[j].currentTime) {\n\t\t    s[j].currentTime = 0;\n\t\t  }\n\t\t}\n      }\n    }\n  }\n  var div = document.getElementById(&quot;storeArea&quot;).firstChild;\n  var fe = [&quot;ogg&quot;, &quot;mp3&quot;, &quot;wav&quot;, &quot;webm&quot;];\n  while (div) {\n    var b = String.fromCharCode(92);\n    var q = '&quot;';\n    var re = &quot;['&quot; + q + &quot;]([^&quot; + q + &quot;']*?)&quot; + b + &quot;.(ogg|mp3|wav|webm)['&quot; + q + &quot;]&quot;;\n    k(new RegExp(re, &quot;gi&quot;));\n    div = div.nextSibling;\n  }\n\n  function k(c, e) {\n    do {\n      var d = c.exec(div.innerHTML);\n      if (d) {\n        var a = new Audio();\n        if (a.canPlayType) {\n          for (var i = -1; i &lt; fe.length; i += 1) {\n            if (i &gt;= 0) d[2] = fe[i];\n            if (a.canPlayType(&quot;audio/&quot; + d[2])) break;\n          }\n          if (i &lt; fe.length) {\n            a.setAttribute(&quot;src&quot;, d[1] + &quot;.&quot; + d[2]);\n            a.interval = null;\n            macros.playsound.soundtracks[d[1]] = a;\n          } else console.log(&quot;Browser can't play '&quot; + d[1] + &quot;'&quot;);\n        }\n      }\n    } while (d);\n  }\n}());</div><div tiddler="Sudden Encounter-3-1" tags="" created="201503281307" modifier="twee" twine-position="1068,323">You confront him about the event. Not wanting to attract any more attention, you speak quietly yet firmly: “&lt;&lt;printname $actor&gt;&gt;, why did you not listen to me? We have gone through this many times before, and yet at that pivotal moment you decided that I should dance with death.” &lt;&lt;printname $actor&gt;&gt; is silent. You raise your voice a little. “Well!?”\n\n[[Next|Sudden Encounter-3-2]]</div><div tiddler="Sudden Encounter-3-3" tags="" created="201503281307" modifier="twee" twine-position="1504,155">You decide that it makes sense that &lt;&lt;printname $actor&gt;&gt; would not budge. He was probably petrified with fear. You would be too, if not for the strength of your company when channeling that spell. You act normally, and &lt;&lt;printname $actor&gt;&gt; appears relieved that he would not have to bear your wrath. The party moves on.\n\n[[Next|Sudden Encounter-4]]</div><div tiddler="Sudden Encounter-3-2" tags="" created="201503281315" modifier="twee" twine-position="1506,325">&lt;&lt;getvalue $actorWit $actor &quot;wit&quot;&gt;&gt;&lt;&lt;if $actorWit is 25&gt;&gt;You are about to pin him down when you hear a faint, cracked voice. “Please… I need it for my - for my dog. Yeah! I need this gold for my dog!” Your party exchanges looks of bewilderment. You share the same feeling.\n \n“What did you say?”\n&lt;&lt;printname $actor&gt;&gt; replies, “Look, my dog was feeling a bit sick. I thought a bit of gold would cheer him up!”\nYou hear someone whispering in your group: “I didn’t even know he had a dog…”\n\nYou silently agree. He’s obviously lying. You demand, “Look, we forgive you, no hard feelings. In fact, I’ll even let you hold on to all that gold -” &lt;&lt;printname $actor&gt;&gt;’s face beams with excitement. “BUT we’ll split the other loot amongst ourselves until we have as much as you. Deal?” &lt;&lt;printname $actor&gt;&gt; is too busy staring at his bounty to listen to you. His loss.&lt;&lt;else if $actorWit is 50&gt;&gt;You are about to pin him down when he calmly says, “I don’t know what got hold of me. Here, take the loot.” That’s a bit weird - you were expecting him to weasel his way out somehow. It looks like he didn’t trust his own cleverness.&lt;&lt;else if $actorWit is 75&gt;&gt;You are about to pin him down when suddenly he yells, “Shut up, shut up! Can’t you see? This necklace is cursed! You can tell because of the pixels.”\n\n“Pixels?”, you ask.\n\n“Yes! If you would just look closely, you would see that this necklace is made up of millions of tiny squares - pixels, if you will - unlike any mineral I’ve ever seen. It’s very clearly manufactured and very clearly cursed. You know what? I’m going to keep it with me for research, and I suggest you don’t interrupt me anymore.”\n\nYou aren’t exactly an expert in this sort of unholy witchcraft, and now is not the time to learn it. You allow &lt;&lt;printname $actor&gt;&gt; to keep the necklace and you take your meager coins.&lt;&lt;endif&gt;&gt;\n\n[[Next|Sudden Encounter-4]]</div><div tiddler="Out of Food-1-2" tags="" created="201503281754" modifier="twee" twine-position="1362,459">You decide that you need these rations if you are to get out of this cave alive. Self-preservation has to be a given in these times. Sucks to be that guy.\n\n&lt;&lt;if not($actor is -1) &amp;&amp; $greedCheck gte $actorGreed&gt;&gt;&lt;&lt;printname $actor&gt;&gt; seems to think otherwise, however. &lt;&lt;printname $actor&gt;&gt; kneels down gives the man what seems to be half of his rations.\n\n&quot;Are you sure this is wise&quot;, you ask him. &quot;We have a hard road ahead of us.&quot;\n&quot;That's true, but this man is suffering more than us.&quot;, he says.\n\n&lt;&lt;printname $actor&gt;&gt; gets up and looks at you. You get the feeling he thinks he's better than you. Asshole.&lt;&lt;endif&gt;&gt;\n\n[[Next|Out of Food-2-1]]</div><div tiddler="Out of Food-1-1" tags="" created="201503281754" modifier="twee" twine-position="1194,608">You give the man some food. His body becomes much more animated as he attempts to thank you but ends up coughing and wheezing. He's obviously been down here for a very long time. You're sort of amazed he's still even alive.\n\n&lt;&lt;if not($actor is -1) &amp;&amp; $greedCheck gte $actorGreed&gt;&gt;You stand up and look at &lt;&lt;printname $actor&gt;&gt;'s face. He seems really happy that you gave the old man some food. You decide to keep moving and wish the old man good luck.&lt;&lt;endif&gt;&gt;\n\n[[Next|Out of Food-2-1]]</div><div tiddler="A Heart to Heart Discussion-1-2" tags="" created="201503281548" modifier="twee" twine-position="846,600">&lt;&lt;getvalue $actorGreed $actor &quot;greed&quot;&gt;&gt;&lt;&lt;if $actorGreed is 25&gt;&gt;“Everyone,” says X.\n“What?” asks the spectre.\n“I said everyone. Everyone gets the gold. I don’t care if it’s a single gold piece or millions - I shall bestow my wealth upon every capable being.”\nYou can almost see a smile form on the ghost. “You really are my son. Wish granted.”\n\nInstantly you feel your knapsack a single coin heavier. X amazes you with his benevolence. It’s too bad he doesn’t know about inflation.&lt;&lt;else if $actorGreed is 50&gt;&gt;“My party. I will split the wealth with my party, as has always been agreed on. Right, Y?”\n“Hey, that money is rightfully yours,” you say.\n“I know that. But I wouldn’t have gotten to see him if not for you guys!” says X.\nYou can’t argue with that. It is free money after all. You help split the gold and then move on.&lt;&lt;else&gt;&gt;“I want all of it! It’s all mine!” yells X.\nYou can almost see anger in the spectre’s vague facial features. “Shame on you,” it says, as it vanishes in a puff of smoke.\nFor a second, there is nothing but darkness. Then you hear a large thud as X falls to the floor. It looks like a modestly sized sack of coins came out of nowhere and hit his head. Guess his wish was granted after all.&lt;&lt;endif&gt;&gt;\n\n&lt;&lt;nextscene $scene&gt;&gt;&lt;&lt;print &quot;[[Next|&quot; + $scene + &quot;]]&quot;&gt;&gt;</div><div tiddler="StoryTitle" tags="" created="201503272209" modifier="twee" twine-position="10,150">Aesop's Cave</div><div tiddler="A Heart to Heart Discussion-1-1" tags="" created="201503281547" modifier="twee" twine-position="664,579">You say nothing. X now stares at the spectre at what should be its eyes. It presents him with two options. “I was once a man of great wealth, yet foolish enough to explore this perilous cave,” it says. “Now much of it is spread among these wretched chests and hoarded by the unliving. You, my father - “\n\n“I’m your father?” X scoffs. “Well that makes no sense at all!”\n“Oh. Erm, let me try that again.”\nThere is an awkward silence. The spectre speaks again after recollecting its thoughts.\n\n“You, my son, are the one destined to bear my wealth. But now I have obtained a few powers after being stuck on this earth for so long. If you desire, you may bestow it to any person alive today.”\n\n[[Next|A Heart to Heart Discussion-1-2]]</div><div tiddler="Sudden Encounter-1-3" tags="" created="201503281232" modifier="twee" twine-position="562,311">&lt;&lt;getvalue $actorMercy $actor &quot;mercy&quot;&gt;&gt;&lt;&lt;if $actorMercy is 25&gt;&gt;&lt;&lt;printname $actor&gt;&gt; laughs maniacally. “Can’t you see, &lt;&lt;print $name&gt;&gt;? This is a test of our mettle, and I am merely the proctor! We have sliced through plenty of skeletons before. What matters here is efficiency, and I’d recommend you stop wasting your time with me as you’ll simply have to kill the skeletons faster than I’m making them!” You are flabbergasted. “&lt;&lt;printname $actor&gt;&gt;, have you lost your mind?! This is no game. You are gambling with our lives and I command you to stop!” &lt;&lt;printname $actor&gt;&gt; has the face of a bored child. “Fine,” he sighs. With a single gesture of his staff half of the skeletons turn on their friends. Your party looks on in a mix of confusion and relief, and then celebrates &lt;&lt;printname $actor&gt;&gt;’s prowess. You decide to keep your conversation a secret.&lt;&lt;else if $actorMercy is 50&gt;&gt;&lt;&lt;printname $actor&gt;&gt; breaks his concentration and looks in horror at what he has done. Immediately he ends his spell, and nearly half of the skeletons instantly collapse into a sea of bones, and your party makes quick work of the remaining ones. Your party looks on in a mix of confusion and relief, and then celebrates &lt;&lt;printname $actor&gt;&gt;’s prowess. It looks like he just made a small mistake. There’s nothing to take note of.&lt;&lt;else if $actorMercy is 75&gt;&gt;“They’re good! They’ll work for us, I know it,” cries &lt;&lt;printname $actor&gt;&gt;. You sigh. If anybody could treat skeletons with compassion, it’s &lt;&lt;printname $actor&gt;&gt;. It appears that he has bit off more than he can chew, however. “Look, &lt;&lt;printname $actor&gt;&gt;,” you say. “I know you don’t want to end their un-lives, but making more of them doesn’t help us. You can’t save everybody. Just resort to your damaging spells and we’ll get out of here alive.” &lt;&lt;printname $actor&gt;&gt; hesitates, but he ultimately calls off the necromancy spell. Nearly half of the skeletons instantly collapse into a sea of bones, and your party makes quick work of the remaining ones. Your party looks on in a mix of confusion and relief, and then celebrates &lt;&lt;printname $actor&gt;&gt;’s prowess.&lt;&lt;endif&gt;&gt;\n\n[[Next|Sudden Encounter-2]]</div><div tiddler="Sudden Encounter-1-2" tags="" created="201503281231" modifier="twee" twine-position="553,151">No, surely it couldn’t be him. There must be some aura in the cave itself causing them to regenerate. You’ll just have to tough it out. It takes much longer than you had originally expected to kill all of them. Eventually, the last skeleton falls apart, and it appears that they are no longer being resurrected, either. Strange.\n\n[[Next|Sudden Encounter-2]]</div><div tiddler="Sudden Encounter-1-1" tags="" created="201503281231" modifier="twee" twine-position="395,297">You carefully make your way to &lt;&lt;printname $actor&gt;&gt;, slashing your way through a few more skeletons. Finally you reach him. “&lt;&lt;printname $actor&gt;&gt;, what are you doing? Why are your minions rushing to fight my men?” He focuses his concentration on finishing his current spell while you struggle to bat away a few more skeletons. Conversation is a bit difficult right now.\n\n[[Next|Sudden Encounter-1-3]]</div><div tiddler="Running in Circles-2-1" tags="" created="201503281540" modifier="twee" twine-position="416,420">You ignore his speech and command the team to take the right path. He’s been wrong before, and you certainly trust your own judgment over his.\n\n[[Next|A Heart to Heart Discussion]]</div><div tiddler="Final Encounter-1-2" tags="" created="201503281619" modifier="twee" twine-position="315,884">&lt;&lt;if $traitor is 1&gt;&gt;Of course it’s &lt;&lt;print $mem1&gt;&gt;. He’s been acting completely unlike himself, and it’s time to point him out on it before does anything worse. You see him stuffing some gold coins into his sack a few rooms down and decide to confront him. “&lt;&lt;print $mem1&gt;&gt;, I know who you are, and that disguise of yours might fool them but it won’t fool me.” The rest of your group, hearing the exchange, gathers around the both of you. &lt;&lt;print $mem1&gt;&gt; just stares at you with a confused look. You grab him by his shoulders. “Don’t play dumb with me! Who are you, really!?”\n\n[[Next|Final Encounter-1-6]]&lt;&lt;else&gt;&gt;Of course it’s &lt;&lt;print $mem1&gt;&gt;. He’s been acting completely unlike himself, and it’s time to point him out on it before does anything worse. You see him stuffing some gold coins into his sack a few rooms down and decide to confront him. “&lt;&lt;print $mem1&gt;&gt;, I know who you are, and that disguise of yours might fool them but it won’t fool me.” The rest of your group, hearing the exchange, gathers around the both of you. &lt;&lt;print $mem1&gt;&gt; just stares at you with a confused look. You grab him by his shoulders. “Don’t play dumb with me! Who are you, really!?”\n\nYou start to shake him violently until the other party members restrain you. “I am &lt;&lt;print $mem1&gt;&gt;! What are you talking about?” Everyone is looking at you with bewilderment. You realize you’ve might have been wrong.[[Next|Final Encounter-1-7]]&lt;&lt;endif&gt;&gt;</div><div tiddler="Running in Circles-1-2" tags="" created="201503281541" modifier="twee" twine-position="437,562">&lt;&lt;getvalue $actorWit $actor &quot;wit&quot;&gt;&gt;&lt;&lt;if $actorWit is 25&gt;&gt;Some time later, however, the team, led by &lt;&lt;printname $actor&gt;&gt; for the time being, ends up at exactly the same fork in the road as before. Upon closer inspection, there is an eroded sign which reads, “RIGHT - TREASURE ROOM. LEFT - DONUT ROOM.” Much to &lt;&lt;printname $actor&gt;&gt;’s dismay, the donut room did not actually contain donuts. Rather, it was large cavern in the shape of a donut. You make a mental note not to trust &lt;&lt;printname $actor&gt;&gt;’s intelligence from here on.&lt;&lt;else if $actorWit is 50&gt;&gt;A few minutes later the narrow path widens into a large room, populated with a few skeletons here and there. There are enemies, you note, so we must be going the right way. You ask &lt;&lt;printname $actor&gt;&gt;, “How did you know which way to go?” He shrugs and replies, “Pure luck. But you would have trusted me anyway, wouldn’t you, &lt;&lt;print $name&gt;&gt;?” It looks like his intelligence played no role in this decision.&lt;&lt;else&gt;&gt;A few minutes later the narrow path widens into a large room stocked to the brim with chests and gold. &lt;&lt;printname $actor&gt;&gt; must have known this all along! You ask &lt;&lt;printname $actor&gt;&gt;, “How did you know which way to go?” He smiles and replies, “Did you see the markings on the path? They were in an ancient language. The carvings on the left path said ‘phat loot.’” You had no idea he’d studied linguistics. He’s even smarter than you thought he was.&lt;&lt;endif&gt;&gt;\n\n[[Next|Sharing the Loot]]</div><div tiddler="Running in Circles-1-1" tags="" created="201503281540" modifier="twee" twine-position="202,560">&lt;&lt;if $actor is -1&gt;&gt;&lt;&lt;nextrand $actor 4&gt;&gt;&lt;&lt;getvalue $actorAlive $actor &quot;alive&quot;&gt;&gt;After about half an hour of roaming, your party ends up at the same intersection.&lt;&lt;if $actorAlive&gt;&gt;&quot;Are you kidding me? You led us to the same spot!&quot;, &lt;&lt;printname $actor&gt;&gt; says.\n&quot;I didn't hear you make any suggestions when we got here.&quot;, you say snarkily back to him.\n&lt;&lt;printname $actor&gt;&gt; begins to say something, but backs down. Perhaps next time he'll think before he says something.\n&lt;&lt;else&gt;&gt;After some complaints from your party, you decide to move on and go the other way, hoping to finally get somewhere&lt;&lt;endif&gt;&gt;\n\n[[Next|A Heart to Heart Discussion]]&lt;&lt;else&gt;&gt;He does make a good point - you’ve been with him for a while now. It’s best to trust him. If he’s not right, at least you haven’t burned any bridges between the two of you. You place trust in his experience and allow &lt;&lt;printname $actor&gt;&gt; to lead you deeper into the cave.\n\n[[Continue|Running in Circles-1-2]]&lt;&lt;endif&gt;&gt;\n</div><div tiddler="Sharing the Loot" tags="" created="201503280100" modifier="twee" twine-position="301,711">&lt;&lt;nextrand $actor 4&gt;&gt;You wander into a large room. It’s dark, but in the distance you see a few chests strewn about. You tell the team to search the rest of the area while you go for the chests. There’s nothing more than the usual variety of loot - gold, jewels, a cool looking sword - but you catch yourself before opening the last chest. This one looks different from the others. The sinister markings suggests that it’s a trap! It’s a good thing you were careful. Then a wicked plan enters your mind… \n\nYou look across the room. &lt;&lt;printname $actor&gt;&gt; seems like a threat to your power. Maybe you could lure him to the chest.\n\n[[Trick him into opening the chest|Sharing the Loot-1]]\n[[Forget it|Sharing the Loot-2]]\n\n</div><div tiddler="Sharing the Loot-2" tags="" created="201503281531" modifier="twee" twine-position="670,707">You snap out of it. The cave must be getting to you. You ignore the trapped chest and rejoin your party with the loot.\n\n&lt;&lt;nextscene $scene&gt;&gt;&lt;&lt;print &quot;[[Next|&quot; + $scene + &quot;]]&quot;&gt;&gt;</div><div tiddler="Sharing the Loot-1" tags="" created="201503281531" modifier="twee" twine-position="485,717">&lt;&lt;getvalue $actorPar $actor &quot;paranoia&quot;&gt;&gt;&lt;&lt;if $actorPar is 75&gt;&gt;You go up to &lt;&lt;printname $actor&gt;&gt;. “Hey, I found a great bow that I think you’d be able to use. Come look at it!” you say. He gets excited. It’s certainly an upgrade over the toy bow he’s been using. The two of you come back to the chest.\n“That thing?” says &lt;&lt;printname $actor&gt;&gt;, pointing to the chest.\n“Yep.”\n“Are you insane? Do you know how these things were made? You have no idea what could be in there! It could be a stick of dynamite, a giant octopus - it could even be your mother-in-law! No, I’m going to turn a blind eye to that chest and live another day, thank you very much.”\n\n&lt;&lt;printname $actor&gt;&gt; runs back to join with the rest of the party. You are left wondering how one could possibly fit a giant octopus in a chest that small, much less your mother-in-law. His extreme paranoia has saved himself from your plan. You follow &lt;&lt;printname $actor&gt;&gt; hoping that he won’t rattle on about what just went down.&lt;&lt;else&gt;&gt;You head off looking for &lt;&lt;printname $actor&gt;&gt;. “Hey, I found a great bow that I think you’d be able to use. Come look at it!” you say. He gets excited. It’s certainly an upgrade over the toy bow he’s been using. The two of you come back to the chest. \n\n“It’s in this chest?” says &lt;&lt;printname $actor&gt;&gt;. You nod.\n“Well why didn’t you just open it?”\n“Uh… because you have to be a level 50 archer to open it! That or pay $2.99.”\n&lt;&lt;printname $actor&gt;&gt; is confused. “What in the gods’ name is a ‘$’? I’m not even level 50!”\n“Shut up and open the chest.”\n\nHis feelings are hurt by your sudden outburst. You’re a jerk. That won’t matter, however, because as soon as &lt;&lt;printname $actor&gt;&gt; opens the chest a giant octopus jumps out! He tries to run but is caught in its noodly tentacles. After a bit of struggle, he gets pulled into the chest and it closes shut. &lt;&lt;printname $actor&gt;&gt; is dead! But it all went as planned. You needed to get rid of him, he was acting way too suspiciously… right?&lt;&lt;endif&gt;&gt;\n\n&lt;&lt;kill $actor&gt;&gt;&lt;&lt;nextscene $scene&gt;&gt;&lt;&lt;print &quot;[[Next|&quot; + $scene + &quot;]]&quot;&gt;&gt;</div><div tiddler="Out of Food-3-3" tags="" created="201503281844" modifier="twee" twine-position="2122,468">With a little sleight of hand, you make it look like he lost his strength. You let go of his hand as he plummets, screaming until he’s too far down to be heard anymore. You can’t even hear him hit the ground, if the there is one. You share the solemn faces on your other party members. &lt;&lt;printname $actor&gt;&gt; is dead and nobody suspects a thing.\n\n&lt;&lt;kill $actor&gt;.&lt;&lt;nextscene $scene&gt;&gt;&lt;&lt;print &quot;[[Next|&quot; + $scene + &quot;]]&quot;&gt;&gt;</div><div tiddler="Beggining-1" tags="" created="201503272306" modifier="twee" twine-position="380,12">&lt;&lt;printname 0&gt;&gt;.\n\n&lt;&lt;printbio 0&gt;&gt;\n\n[[Next|Beggining-2]]\n</div><div tiddler="Sudden Encounter-4" tags="" created="201503281307" modifier="twee" twine-position="1660,163">&lt;&lt;nextactor $actor &quot;greed&quot; true&gt;&gt;&lt;&lt;getvalue $actorGreed $actor &quot;greed&quot;&gt;&gt;&lt;&lt;nextrand $greedCheck&gt;&gt;The party lets out an exhausted “hurrah” as the monster falls face-first onto the cavern floor. &lt;&lt;if not($actorMercy is -1) and $actorGreed gte $greedCheck&gt;&gt;&lt;&lt;printname $actor&gt;&gt; is the first one to see the chest behind it. Before you can even catch your breath, &lt;&lt;printname $actor&gt;&gt; is running to grab the loot. The rest of the group follows a few minutes later. Looking in the chest you see only a few gold coins. In fact, a single coin has been left for each of you. You realize what has happened: &lt;&lt;printname $actor&gt;&gt; must have taken the majority of it for himself. Your teammates are restless. \n\n[[Confront him|Sudden Encounter-4-1]]\n[[Let him have it|Sudden Encounter-4-3]]&lt;&lt;else&gt;&gt;Your teammates then discover a chest behind where the monster had fallen. After much debate, the loot has been split to each of the party member's satisfaction.\n\n&lt;&lt;nextscene $scene&gt;&gt;&lt;&lt;print &quot;[[Next|&quot; + $scene + &quot;]]&quot;&gt;&gt;&lt;&lt;endif&gt;&gt;</div><div tiddler="Sudden Encounter-3" tags="" created="201503281253" modifier="twee" twine-position="1077,162">&lt;&lt;nextactor $actor &quot;mercy&quot; false&gt;&gt;&lt;&lt;getvalue $actorMercy $actor &quot;mercy&quot;&gt;&gt;&lt;&lt;nextrand $mercyCheck 100&gt;&gt;An hour later your team has finally vanquished all of the skeletons save for a few stragglers. The abomination of flesh, too, is quite literally on its last leg, having been slowly whittled down.\n\n&lt;&lt;if not($actorMercy is -1) and $actorMercy gte $mercyCheck&gt;&gt;You channel a withering spell on the abomination and command all but &lt;&lt;printname $actor&gt;&gt; to come to your aid, amplifying its effects. The previously hulking figure is now a mere heap of flesh on its last breath. You shout at &lt;&lt;printname $actor&gt;&gt;, “Well, what are you waiting for? Finish off that creature!” He does not move. You and your group can feel the mana wasting away. There isn’t much time left. You either have to break away from the spell and kill the monster yourself, or hope that &lt;&lt;printname $actor&gt;&gt; will act.\n\n[[Break Away|Sudden-Encounter-3-3]]\n[[Keep the spell going|Sudden-Encounter-3-4]]&lt;&lt;else&gt;&gt;You channel a withering spell on the abomination and command all but &lt;&lt;printname 2&gt;&gt; to come to your aid, amplifying its effects.  &lt;&lt;printname 2&gt;&gt; walks up to the monster and finishes it off.\n\n[[Next|Sudden Encounter-4]]&lt;&lt;endif&gt;&gt;</div><div tiddler="Sudden Encounter-2" tags="" created="201503281247" modifier="twee" twine-position="728,146">&lt;&lt;nextactor $actor &quot;bravery&quot; true&gt;&gt;&lt;&lt;getvalue $actorBravery $actor &quot;bravery&quot;&gt;&gt;&lt;&lt;nextrand $braveryCheck 100&gt;&gt;After having slain most of the skeletons, the abomination now approaches your party head-on as you prepare for the final confrontation. &lt;&lt;if not($actorMercy is -1) and $braveryCheck gte $actorBravery&gt;&gt;You and the other three members alike are exhausted, and - three members… where is &lt;&lt;printname $actor&gt;&gt;?! You see his silhouette a few hundred meters behind your formation, quivering in fear. This can’t be happening. &lt;&lt;if $actorBravery is 25&gt;&gt;That coward!&lt;&lt;else if $actorBravery is 50&gt;&gt;&lt;&lt;printname $actor&gt;&gt; isn't the bravest soul in the world, but he's no coward!&lt;&lt;else if $actorBravery is 75&gt;&gt;&lt;&lt;printname $actor&gt;&gt; wouldn't flinch at a fully grown troll if one were charging at him!&lt;&lt;endif&gt;&gt; Your team has trained itself in countless maneuvers and techniques, and even a single absentee is enough to collapse the team.\n\n[[Confront him|Sudden Encounter-2-1]]\n[[Fight without him|Sudden Encounter-2-2]]&lt;&lt;else&gt;&gt;You and your four party members prepare for battle.\n[[Next|Sudden Encounter-3]]&lt;&lt;endif&gt;&gt;</div><div tiddler="Sudden Encounter-1" tags="" created="201503281124" modifier="twee" twine-position="384,143">&lt;&lt;nextactor $actor &quot;experience&quot; true&gt;&gt;&lt;&lt;getvalue $actorExp $actor &quot;experience&quot;&gt;&gt;&lt;&lt;nextrand $expCheck 100&gt;&gt;Your team is slaying skeleton after skeleton. Slowly but surely, you are thinning the ranks of the enemy. &lt;&lt;if not($actorExp is -1) and $expCheck gte $actorExp&gt;&gt;Then you notice something: despite about a half an hour of fighting, you can still see countless skeletons running at your party. By some act of necromancy the sea of bones beneath your feet are coming up to make more skeletons! Yet there is no necromancer in sight. The abomination doesn’t appear to be casting any magic either. A purple glow catches your eye. Wait a minute, &lt;&lt;printname $actor&gt;&gt; is a necromancer! Clearly this spell was too ambitious for him. &lt;&lt;if $actorExp is 25&gt;&gt;He hasn’t trained himself enough.&lt;&lt;else&gt;&gt;He should know better!&lt;&lt;endif&gt;&gt;\n\n[[Confront him|Sudden Encounter-1-1]]\n[[Ignore it|Sudden Encounter-1-2]]\n&lt;&lt;else&gt;&gt;It's only a matter of time before you get to the fiend in flesh and bone.\n\n[[Next|Sudden Encounter-2]]&lt;&lt;endif&gt;&gt;</div><div tiddler="Sudden-Encounter-3-4" tags="" created="201503281819" modifier="twee" twine-position="1233,178">You decide to risk it for the biscuit, breaking away from the spell and charging at the abomination. It almost musters the power to impale you with its bony sword, but you barely manage the speed to kill it first.\n\nThe team lets out a sigh of relief. You are furious - &lt;&lt;printname $actor&gt;&gt; refused your order and almost got you killed as a result.\n\n[[Confront him|Sudden Encounter-3-1]]\n[[Ignore him|Sudden Encounter-3-3]]</div><div tiddler="Out of Food-3-2" tags="" created="201503281844" modifier="twee" twine-position="2084,636">You need to clear your mind and focus on the task at hand. With a burst of strength you pull him up and onto the cavern floor. &lt;&lt;printname $actor&gt;&gt; is still petrified with fear, but he thanks you for saving him.\n\n&lt;&lt;nextscene $scene&gt;&gt;&lt;&lt;print &quot;[[Next|&quot; + $scene + &quot;]]&quot;&gt;&gt;</div><div tiddler="Sudden-Encounter-3-3" tags="" created="201503281819" modifier="twee" twine-position="1373,178">&lt;&lt;getvalue $actorBrave $actor &quot;bravery&quot;&gt;&gt;&lt;&lt;if $actorBrave gte $mercyCheck&gt;&gt;Finally &lt;&lt;printname $actor&gt;&gt; is able to muster the courage to slay the beast. The spell breaks just as his sword enteres the monsters skull, killing it.\n\nThe team lets out a sigh of relief. You are furious - &lt;&lt;printname $actor&gt;&gt; refused your order and almost got you killed as a result.&lt;&lt;else&gt;&gt;&lt;&lt;kill $actor&gt;&gt;But &lt;&lt;printname $actor&gt;&gt; still does not do anything. The monster eventually consumes him. Your team watches in horror as they run out of mana. However, you manage to keep a level head and order your party to reform and kill the monster. After some half-learned manuevers in-case of something like this, the monster is killed.\n\nThough you are victorious, you only feel loss. Perhaps if you had acted sooner, things could have ended better.\n\n[[Sudden Encounter-4]]&lt;&lt;endif&gt;&gt;</div><div tiddler="Out of Food-1" tags="" created="201503281752" modifier="twee" twine-position="1180,454">&lt;&lt;nextactor $actor &quot;greed&quot; low&gt;&gt;&lt;&lt;getvalue $actorGreed $actor &quot;greed&quot;&gt;&gt;&lt;&lt;nextrand $greedCheck 100&gt;&gt;To your amazement you find another human in the cave! He is emaciated, however, looking almost like the skeletons you fought before. You can barely hear him beg for food as his voice has become nothing but a faint crackle. You look at your currrent supplies and see that soon your party will run out of food.\n\n[[Give the survivor some food|Out of Food-1-1]]\n[[Keep the food for yourself|Out of Food-1-2]]</div><div tiddler="Beggining" tags="" created="201503272247" modifier="twee" twine-position="201,9">&lt;&lt;loopsound $introsound&gt;&gt;You are the leader of a renowned party of adventurers. Today you venture into the depths of Aesop cave in search of great, untold riches. Though your company has been through countless expeditions together, today you have a sneaking suspicion that one member is going to sabotage the rest of the team. You have known these people for years, both in times of happiness and strife, and in turn have a good understanding of each of their personalities.\nAs you go through the cave, pay attention to their actions; you may have to make a decision at the end of the ordeal.&lt;&lt;seedify $name&gt;&gt;&lt;&lt;nexttraitor $traitor&gt;&gt;\n\n[[Your team consists of...|Beggining-1]]</div><div tiddler="Out of Food-2-1" tags="" created="201503280100" modifier="twee" twine-position="1586,464">&lt;&lt;silently&gt;&gt;\n&lt;&lt;nextactor $actor &quot;paranoia&quot; false&gt;&gt;\n&lt;&lt;getvalue $actorPara $actor &quot;paranoia&quot;&gt;&gt;\n&lt;&lt;if $actor is -1&gt;&gt;\n&lt;&lt;nextrand $actor 4&gt;&gt;\n&lt;&lt;endif&gt;&gt;\n&lt;&lt;nextrand $paraCheck 100&gt;&gt;\n&lt;&lt;endsilently&gt;&gt;The party is getting tired and hungry. You are down to your last ration and are trying to share it as meagerly as possible, as when you run out your cohorts will surely go mad with hunger. \n\nThere is a faint barking sound as a large hound charges at you! Before you can draw your weapon, it mauls &lt;&lt;printname $actor&gt;&gt;… and starts licking him. This furry beast must have gotten lost somehow. The party is relieved, and even laughs when &lt;&lt;printname $actor&gt;&gt; yells, “Help, help! This thing is going to kill me!” &lt;&lt;if $actorPara gte $paraCheck&gt;&gt;Then he pulls out his knife and butchers the dog. You are horrified and furious. How could he possibly think that a labradoodle was going to kill him?\n\n[[Confront him|Out of Food-2-2]]\n[[Move on|Out of Food-2-3]]&lt;&lt;else&gt;&gt;&lt;&lt;printname $actor&gt;&gt; pushes the hound off him. He then runs off into the direction your party just came from.\n\n&quot;Damn we could've eaten it&quot;, remarks &lt;&lt;printname $actor&gt;&gt;. He doesn't seem happy that the dog came for him in the first place.\n\n[[Next|Out of Food-3-1]]&lt;&lt;endif&gt;&gt;</div><div tiddler="A Heart to Heart Discussion" tags="" created="201503280100" modifier="twee" twine-position="644,447">&lt;&lt;nextactor $actor &quot;bravery&quot; high&gt;&gt;&lt;&lt;getvalue $actorBrave $actor &quot;bravery&quot;&gt;&gt;The adventure has calmed down for now. It’s been awhile since you’ve had to fight any creepy ghoulies. There is a certain air of ominousness hovering above the party. Suddenly, there is a brilliant flash of white light! A ghost appears before you, a translucent figure with facial features that barely resemble its former self. Clearly it has been stuck here for awhile. Even more to your surprise, it begins speaking.\n\n“Humans, why do you trespass on my domain? I will let you go, but only if I may speak with the one called &lt;&lt;printname $actor&gt;&gt;.” &lt;&lt;if $actorBrave is 75&gt;&gt;You are surprised to hear his name, but &lt;&lt;printname $actor&gt;&gt; keeps his resolve. He unflinchingly steps forward. This is against your greater judgment - it’s a supernatural being and there’s no telling what could happen.&lt;&lt;else&gt;&gt;&lt;&lt;printname $actor&gt;&gt; is petrified. He's scared, more scared than the rest of your party it seems.&lt;&lt;endif&gt;&gt;\n\n[[Let him go|A Heart to Heart Discussion-1-1]]\n[[Stop him|A Heart to Heart Discussion-2-1]]</div><div tiddler="Out of Food" tags="" created="201503281748" modifier="twee" twine-position="1011,460">&lt;&lt;resetactors&gt;&gt;&lt;&lt;nextactor $actor &quot;paranoia&quot; high&gt;&gt;&lt;&lt;getvalue $actorPara $actor &quot;paranoia&quot;&gt;&gt;&lt;&lt;nextrand $paraCheck 100&gt;&gt;As you continue down the cave it suddenly becomes too dark to see only a few steps in front of where your party is. You take out your lamp and light it to give you and your party more vision. &lt;&lt;if not($actor is -1) and $actorPara gte $paracheck&gt;&gt;As soon as you light it &lt;&lt;printname $actor&gt;&gt; starts shouting. “They’re here, they’re here! Get them away from me!” It takes three people to restrain him and cover his mouth before he can attract more attention. He calms down only when you’ve lit up your lamp. It appears that the darkness was getting to him.&lt;&lt;else&gt;&gt;The lamp lights up a little quicker than usual. You continue on your way.&lt;&lt;endif&gt;&gt;\n\n[[Next|Out of Food-1]]</div><div tiddler="Out of Food-3-1" tags="" created="201503281844" modifier="twee" twine-position="1972,496">&lt;&lt;silently&gt;&gt;\n&lt;&lt;nextactor $actor &quot;experience&quot; true&gt;&gt;\n&lt;&lt;getvalue $actorExp $actor &quot;experience&quot;&gt;&gt;\n&lt;&lt;if $actor is -1&gt;&gt;\n&lt;&lt;nextrand $actor 4&gt;&gt;\n&lt;&lt;endif&gt;&gt;\n&lt;&lt;nextrand $expCheck 100&gt;&gt;\n&lt;&lt;endsilently&gt;&gt;The cavern eventually widens to reveal a huge chamber with a ravine cutting it in half. It’s a long drop - even your oil lamp can’t illuminate the bottom of it - but also not too wide. You easily jump it, and your party begins to follow. &lt;&lt;printname $actor&gt;&gt; is the last to do so. Suddenly he trips, and is almost flung into the abyss! Luckily, you manage to grab his hand. Then a wicked plan enters your mind… &lt;&lt;printname $actor&gt;&gt; has been a tad suspicious this whole adventure. If he were to, say, accidentally lose his grasp, nobody would notice.\n\n[[&quot;Oops my hand slipped&quot;|Out of Food-3-2]]\n[[Pull him up|Out of Food-3-3]]</div><div tiddler="StoryAuthor" tags="" created="201503272209" modifier="twee" twine-position="10,290">Kevin Sun and Matthewit Dechatech</div><div tiddler="Beggining-2" tags="" created="201503281113" modifier="twee" twine-position="553,13">&lt;&lt;printname 1&gt;&gt;.\n\n&lt;&lt;printbio 1&gt;&gt;\n\n[[Next|Beggining-3]]</div><div tiddler="Beggining-3" tags="" created="201503281113" modifier="twee" twine-position="732,16">&lt;&lt;printname 2&gt;&gt;.\n\n&lt;&lt;printbio 2&gt;&gt;\n\n[[Next|Beggining-4]]</div><div tiddler="Beggining-4" tags="" created="201503281114" modifier="twee" twine-position="899,25">&lt;&lt;printname 3&gt;&gt;.\n\n&lt;&lt;printbio 3&gt;&gt;\n\n[[Next|Beggining-5]]</div><div tiddler="Beggining-5" tags="" created="201503281114" modifier="twee" twine-position="1092,30">&lt;&lt;fadeoutsound $introsound&gt;&gt;&lt;&lt;loopsound $cavesound&gt;&gt;Now venture forth and seek this untold wealth, stored in the depths of Aesop's Cave!\n\n&lt;&lt;nextscene $scene&gt;&gt;&lt;&lt;print &quot;[[Adventure! Treasure! Glory! Damsels!|&quot; + $scene + &quot;]]&quot;&gt;&gt;</div><div tiddler="Out of Food-2-2" tags="" created="201503281611" modifier="twee" twine-position="1572,634">&lt;&lt;getvalue $actorBrave $actor &quot;bravery&quot;&gt;&gt;&lt;&lt;if $actorBrave is 75&gt;&gt;“Hah, did you see me slay that beast?” boasts &lt;&lt;printname $actor&gt;&gt;. “Sharp fangs and acidic drool is nothing when it stands in my way.”\nAcidic… drool? Maybe the dog really was dangerous. You have to admit, other than his flailing arms and flopping about like a child, he handled the encounter with composure. You salvage the body for meat, enough to hold yourself for the rest of the expedition. The party moves on.&lt;&lt;else&gt;&gt;You can hear &lt;&lt;printname $actor&gt;&gt; sobbing quietly. “I didn’t mean to… I got scared. I really thought I was going to die!” You can understand his terror. It’s not very often that you get assaulted with kisses and tail-wagging. Still, &lt;&lt;printname $actor&gt;&gt; totally needs to grow a pair. On the bright side, you now have a bit of meat to sustain you and the rest of your group for the rest of the expedition. &lt;&lt;endif&gt;&gt;\n\n[[Next|Out of Food-3-1]]</div><div tiddler="Out of Food-2-3" tags="" created="201503281611" modifier="twee" twine-position="1772,677">You calm down. Though a bit of company would have been nice, the dangers of the dungeon are clear. He acted fully within his sensibilities. On the bright side, you now have a bit of meat to sustain you and the rest of your group for the remainder of the expedition.\n\n[[Next|Out of Food-3-1]]</div></div></body></html>
